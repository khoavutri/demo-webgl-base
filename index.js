!function(t,r){"object"==typeof exports&&"object"==typeof module?module.exports=r():"function"==typeof define&&define.amd?define([],r):"object"==typeof exports?exports.khoadev=r():t.khoadev=r()}(self,(()=>(()=>{"use strict";var t={961:(t,r,n)=>{n.r(r),n.d(r,{glMatrix:()=>e,mat2:()=>a,mat2d:()=>i,mat3:()=>o,mat4:()=>u,quat:()=>f,quat2:()=>l,vec2:()=>h,vec3:()=>s,vec4:()=>c});var e={};n.r(e),n.d(e,{ARRAY_TYPE:()=>M,EPSILON:()=>v,RANDOM:()=>d,equals:()=>b,setMatrixArrayType:()=>m,toRadian:()=>g});var a={};n.r(a),n.d(a,{LDU:()=>q,add:()=>N,adjoint:()=>S,clone:()=>E,copy:()=>x,create:()=>y,determinant:()=>L,equals:()=>H,exactEquals:()=>B,frob:()=>O,fromRotation:()=>U,fromScaling:()=>C,fromValues:()=>A,identity:()=>T,invert:()=>_,mul:()=>X,multiply:()=>I,multiplyScalar:()=>j,multiplyScalarAndAdd:()=>k,rotate:()=>w,scale:()=>D,set:()=>P,str:()=>F,sub:()=>G,subtract:()=>V,transpose:()=>R});var i={};n.r(i),n.d(i,{add:()=>ct,clone:()=>z,copy:()=>K,create:()=>Y,determinant:()=>J,equals:()=>Mt,exactEquals:()=>vt,frob:()=>st,fromRotation:()=>at,fromScaling:()=>it,fromTranslation:()=>ot,fromValues:()=>Q,identity:()=>Z,invert:()=>$,mul:()=>dt,multiply:()=>tt,multiplyScalar:()=>lt,multiplyScalarAndAdd:()=>ht,rotate:()=>rt,scale:()=>nt,set:()=>W,str:()=>ut,sub:()=>mt,subtract:()=>ft,translate:()=>et});var o={};n.r(o),n.d(o,{add:()=>Ht,adjoint:()=>Rt,clone:()=>bt,copy:()=>yt,create:()=>pt,determinant:()=>_t,equals:()=>Yt,exactEquals:()=>Gt,frob:()=>Bt,fromMat2d:()=>Ft,fromMat4:()=>gt,fromQuat:()=>Ot,fromRotation:()=>Ut,fromScaling:()=>Ct,fromTranslation:()=>Dt,fromValues:()=>Et,identity:()=>Tt,invert:()=>Pt,mul:()=>zt,multiply:()=>St,multiplyScalar:()=>kt,multiplyScalarAndAdd:()=>Xt,normalFromMat4:()=>qt,projection:()=>Nt,rotate:()=>It,scale:()=>wt,set:()=>xt,str:()=>Vt,sub:()=>Kt,subtract:()=>jt,translate:()=>Lt,transpose:()=>At});var u={};n.r(u),n.d(u,{add:()=>Nr,adjoint:()=>er,clone:()=>Qt,copy:()=>Wt,create:()=>Zt,determinant:()=>ar,equals:()=>kr,exactEquals:()=>jr,frob:()=>qr,fromQuat:()=>Pr,fromQuat2:()=>br,fromRotation:()=>Mr,fromRotationTranslation:()=>gr,fromRotationTranslationScale:()=>Tr,fromRotationTranslationScaleOrigin:()=>Ar,fromScaling:()=>vr,fromTranslation:()=>hr,fromValues:()=>$t,fromXRotation:()=>dr,fromYRotation:()=>mr,fromZRotation:()=>pr,frustum:()=>Rr,getRotation:()=>xr,getScaling:()=>Er,getTranslation:()=>yr,identity:()=>tr,invert:()=>nr,lookAt:()=>Cr,mul:()=>Xr,multiply:()=>ir,multiplyScalar:()=>Br,multiplyScalarAndAdd:()=>Hr,ortho:()=>Dr,orthoNO:()=>wr,orthoZO:()=>Ur,perspective:()=>Sr,perspectiveFromFieldOfView:()=>Ir,perspectiveNO:()=>_r,perspectiveZO:()=>Lr,rotate:()=>sr,rotateX:()=>cr,rotateY:()=>fr,rotateZ:()=>lr,scale:()=>ur,set:()=>Jt,str:()=>Or,sub:()=>Gr,subtract:()=>Vr,targetTo:()=>Fr,translate:()=>or,transpose:()=>rr});var s={};n.r(s),n.d(s,{add:()=>$r,angle:()=>Sn,bezier:()=>yn,ceil:()=>nn,clone:()=>zr,copy:()=>Qr,create:()=>Yr,cross:()=>pn,dist:()=>qn,distance:()=>fn,div:()=>On,divide:()=>rn,dot:()=>mn,equals:()=>Dn,exactEquals:()=>wn,floor:()=>en,forEach:()=>Hn,fromValues:()=>Zr,hermite:()=>bn,inverse:()=>Mn,len:()=>Vn,length:()=>Kr,lerp:()=>gn,max:()=>on,min:()=>an,mul:()=>Fn,multiply:()=>tn,negate:()=>vn,normalize:()=>dn,random:()=>En,rotateX:()=>Pn,rotateY:()=>Rn,rotateZ:()=>_n,round:()=>un,scale:()=>sn,scaleAndAdd:()=>cn,set:()=>Wr,sqrDist:()=>Nn,sqrLen:()=>Bn,squaredDistance:()=>ln,squaredLength:()=>hn,str:()=>In,sub:()=>Cn,subtract:()=>Jr,transformMat3:()=>Tn,transformMat4:()=>xn,transformQuat:()=>An,zero:()=>Ln});var c={};n.r(c),n.d(c,{add:()=>zn,ceil:()=>Wn,clone:()=>kn,copy:()=>Gn,create:()=>jn,cross:()=>he,dist:()=>Ae,distance:()=>ae,div:()=>Te,divide:()=>Qn,dot:()=>le,equals:()=>ye,exactEquals:()=>be,floor:()=>$n,forEach:()=>Se,fromValues:()=>Xn,inverse:()=>ce,len:()=>Re,length:()=>oe,lerp:()=>ve,max:()=>te,min:()=>Jn,mul:()=>xe,multiply:()=>Zn,negate:()=>se,normalize:()=>fe,random:()=>Me,round:()=>re,scale:()=>ne,scaleAndAdd:()=>ee,set:()=>Yn,sqrDist:()=>Pe,sqrLen:()=>_e,squaredDistance:()=>ie,squaredLength:()=>ue,str:()=>ge,sub:()=>Ee,subtract:()=>Kn,transformMat4:()=>de,transformQuat:()=>me,zero:()=>pe});var f={};n.r(f),n.d(f,{add:()=>ia,calculateW:()=>Ne,clone:()=>ra,conjugate:()=>Ge,copy:()=>ea,create:()=>Le,dot:()=>sa,equals:()=>ma,exactEquals:()=>da,exp:()=>Ve,fromEuler:()=>ze,fromMat3:()=>Ye,fromValues:()=>na,getAngle:()=>Ue,getAxisAngle:()=>De,identity:()=>Ie,invert:()=>Xe,len:()=>la,length:()=>fa,lerp:()=>ca,ln:()=>Be,mul:()=>oa,multiply:()=>Ce,normalize:()=>Ma,pow:()=>He,random:()=>ke,rotateX:()=>Fe,rotateY:()=>Oe,rotateZ:()=>qe,rotationTo:()=>pa,scale:()=>ua,set:()=>aa,setAxes:()=>ba,setAxisAngle:()=>we,slerp:()=>je,sqlerp:()=>ga,sqrLen:()=>va,squaredLength:()=>ha,str:()=>Ke});var l={};n.r(l),n.d(l,{add:()=>ka,clone:()=>Ea,conjugate:()=>Qa,copy:()=>Sa,create:()=>ya,dot:()=>za,equals:()=>ai,exactEquals:()=>ei,fromMat4:()=>_a,fromRotation:()=>Ra,fromRotationTranslation:()=>Aa,fromRotationTranslationValues:()=>Ta,fromTranslation:()=>Pa,fromValues:()=>xa,getDual:()=>Da,getReal:()=>wa,getTranslation:()=>Fa,identity:()=>La,invert:()=>Za,len:()=>$a,length:()=>Wa,lerp:()=>Ka,mul:()=>Ga,multiply:()=>Xa,normalize:()=>ri,rotateAroundAxis:()=>ja,rotateByQuatAppend:()=>Ba,rotateByQuatPrepend:()=>Ha,rotateX:()=>qa,rotateY:()=>Na,rotateZ:()=>Va,scale:()=>Ya,set:()=>Ia,setDual:()=>Ca,setReal:()=>Ua,sqrLen:()=>ti,squaredLength:()=>Ja,str:()=>ni,translate:()=>Oa});var h={};n.r(h),n.d(h,{add:()=>fi,angle:()=>qi,ceil:()=>Mi,clone:()=>oi,copy:()=>si,create:()=>ii,cross:()=>Li,dist:()=>Yi,distance:()=>Ei,div:()=>Gi,divide:()=>vi,dot:()=>Si,equals:()=>Hi,exactEquals:()=>Bi,floor:()=>di,forEach:()=>Zi,fromValues:()=>ui,inverse:()=>Ri,len:()=>ji,length:()=>Ti,lerp:()=>Ii,max:()=>pi,min:()=>mi,mul:()=>Xi,multiply:()=>hi,negate:()=>Pi,normalize:()=>_i,random:()=>wi,rotate:()=>Oi,round:()=>gi,scale:()=>bi,scaleAndAdd:()=>yi,set:()=>ci,sqrDist:()=>zi,sqrLen:()=>Ki,squaredDistance:()=>xi,squaredLength:()=>Ai,str:()=>Vi,sub:()=>ki,subtract:()=>li,transformMat2:()=>Di,transformMat2d:()=>Ui,transformMat3:()=>Ci,transformMat4:()=>Fi,zero:()=>Ni});var v=1e-6,M="undefined"!=typeof Float32Array?Float32Array:Array,d=Math.random;function m(t){M=t}var p=Math.PI/180;function g(t){return t*p}function b(t,r){return Math.abs(t-r)<=v*Math.max(1,Math.abs(t),Math.abs(r))}function y(){var t=new M(4);return M!=Float32Array&&(t[1]=0,t[2]=0),t[0]=1,t[3]=1,t}function E(t){var r=new M(4);return r[0]=t[0],r[1]=t[1],r[2]=t[2],r[3]=t[3],r}function x(t,r){return t[0]=r[0],t[1]=r[1],t[2]=r[2],t[3]=r[3],t}function T(t){return t[0]=1,t[1]=0,t[2]=0,t[3]=1,t}function A(t,r,n,e){var a=new M(4);return a[0]=t,a[1]=r,a[2]=n,a[3]=e,a}function P(t,r,n,e,a){return t[0]=r,t[1]=n,t[2]=e,t[3]=a,t}function R(t,r){if(t===r){var n=r[1];t[1]=r[2],t[2]=n}else t[0]=r[0],t[1]=r[2],t[2]=r[1],t[3]=r[3];return t}function _(t,r){var n=r[0],e=r[1],a=r[2],i=r[3],o=n*i-a*e;return o?(o=1/o,t[0]=i*o,t[1]=-e*o,t[2]=-a*o,t[3]=n*o,t):null}function S(t,r){var n=r[0];return t[0]=r[3],t[1]=-r[1],t[2]=-r[2],t[3]=n,t}function L(t){return t[0]*t[3]-t[2]*t[1]}function I(t,r,n){var e=r[0],a=r[1],i=r[2],o=r[3],u=n[0],s=n[1],c=n[2],f=n[3];return t[0]=e*u+i*s,t[1]=a*u+o*s,t[2]=e*c+i*f,t[3]=a*c+o*f,t}function w(t,r,n){var e=r[0],a=r[1],i=r[2],o=r[3],u=Math.sin(n),s=Math.cos(n);return t[0]=e*s+i*u,t[1]=a*s+o*u,t[2]=e*-u+i*s,t[3]=a*-u+o*s,t}function D(t,r,n){var e=r[0],a=r[1],i=r[2],o=r[3],u=n[0],s=n[1];return t[0]=e*u,t[1]=a*u,t[2]=i*s,t[3]=o*s,t}function U(t,r){var n=Math.sin(r),e=Math.cos(r);return t[0]=e,t[1]=n,t[2]=-n,t[3]=e,t}function C(t,r){return t[0]=r[0],t[1]=0,t[2]=0,t[3]=r[1],t}function F(t){return"mat2("+t[0]+", "+t[1]+", "+t[2]+", "+t[3]+")"}function O(t){return Math.hypot(t[0],t[1],t[2],t[3])}function q(t,r,n,e){return t[2]=e[2]/e[0],n[0]=e[0],n[1]=e[1],n[3]=e[3]-t[2]*n[1],[t,r,n]}function N(t,r,n){return t[0]=r[0]+n[0],t[1]=r[1]+n[1],t[2]=r[2]+n[2],t[3]=r[3]+n[3],t}function V(t,r,n){return t[0]=r[0]-n[0],t[1]=r[1]-n[1],t[2]=r[2]-n[2],t[3]=r[3]-n[3],t}function B(t,r){return t[0]===r[0]&&t[1]===r[1]&&t[2]===r[2]&&t[3]===r[3]}function H(t,r){var n=t[0],e=t[1],a=t[2],i=t[3],o=r[0],u=r[1],s=r[2],c=r[3];return Math.abs(n-o)<=v*Math.max(1,Math.abs(n),Math.abs(o))&&Math.abs(e-u)<=v*Math.max(1,Math.abs(e),Math.abs(u))&&Math.abs(a-s)<=v*Math.max(1,Math.abs(a),Math.abs(s))&&Math.abs(i-c)<=v*Math.max(1,Math.abs(i),Math.abs(c))}function j(t,r,n){return t[0]=r[0]*n,t[1]=r[1]*n,t[2]=r[2]*n,t[3]=r[3]*n,t}function k(t,r,n,e){return t[0]=r[0]+n[0]*e,t[1]=r[1]+n[1]*e,t[2]=r[2]+n[2]*e,t[3]=r[3]+n[3]*e,t}Math.hypot||(Math.hypot=function(){for(var t=0,r=arguments.length;r--;)t+=arguments[r]*arguments[r];return Math.sqrt(t)});var X=I,G=V;function Y(){var t=new M(6);return M!=Float32Array&&(t[1]=0,t[2]=0,t[4]=0,t[5]=0),t[0]=1,t[3]=1,t}function z(t){var r=new M(6);return r[0]=t[0],r[1]=t[1],r[2]=t[2],r[3]=t[3],r[4]=t[4],r[5]=t[5],r}function K(t,r){return t[0]=r[0],t[1]=r[1],t[2]=r[2],t[3]=r[3],t[4]=r[4],t[5]=r[5],t}function Z(t){return t[0]=1,t[1]=0,t[2]=0,t[3]=1,t[4]=0,t[5]=0,t}function Q(t,r,n,e,a,i){var o=new M(6);return o[0]=t,o[1]=r,o[2]=n,o[3]=e,o[4]=a,o[5]=i,o}function W(t,r,n,e,a,i,o){return t[0]=r,t[1]=n,t[2]=e,t[3]=a,t[4]=i,t[5]=o,t}function $(t,r){var n=r[0],e=r[1],a=r[2],i=r[3],o=r[4],u=r[5],s=n*i-e*a;return s?(s=1/s,t[0]=i*s,t[1]=-e*s,t[2]=-a*s,t[3]=n*s,t[4]=(a*u-i*o)*s,t[5]=(e*o-n*u)*s,t):null}function J(t){return t[0]*t[3]-t[1]*t[2]}function tt(t,r,n){var e=r[0],a=r[1],i=r[2],o=r[3],u=r[4],s=r[5],c=n[0],f=n[1],l=n[2],h=n[3],v=n[4],M=n[5];return t[0]=e*c+i*f,t[1]=a*c+o*f,t[2]=e*l+i*h,t[3]=a*l+o*h,t[4]=e*v+i*M+u,t[5]=a*v+o*M+s,t}function rt(t,r,n){var e=r[0],a=r[1],i=r[2],o=r[3],u=r[4],s=r[5],c=Math.sin(n),f=Math.cos(n);return t[0]=e*f+i*c,t[1]=a*f+o*c,t[2]=e*-c+i*f,t[3]=a*-c+o*f,t[4]=u,t[5]=s,t}function nt(t,r,n){var e=r[0],a=r[1],i=r[2],o=r[3],u=r[4],s=r[5],c=n[0],f=n[1];return t[0]=e*c,t[1]=a*c,t[2]=i*f,t[3]=o*f,t[4]=u,t[5]=s,t}function et(t,r,n){var e=r[0],a=r[1],i=r[2],o=r[3],u=r[4],s=r[5],c=n[0],f=n[1];return t[0]=e,t[1]=a,t[2]=i,t[3]=o,t[4]=e*c+i*f+u,t[5]=a*c+o*f+s,t}function at(t,r){var n=Math.sin(r),e=Math.cos(r);return t[0]=e,t[1]=n,t[2]=-n,t[3]=e,t[4]=0,t[5]=0,t}function it(t,r){return t[0]=r[0],t[1]=0,t[2]=0,t[3]=r[1],t[4]=0,t[5]=0,t}function ot(t,r){return t[0]=1,t[1]=0,t[2]=0,t[3]=1,t[4]=r[0],t[5]=r[1],t}function ut(t){return"mat2d("+t[0]+", "+t[1]+", "+t[2]+", "+t[3]+", "+t[4]+", "+t[5]+")"}function st(t){return Math.hypot(t[0],t[1],t[2],t[3],t[4],t[5],1)}function ct(t,r,n){return t[0]=r[0]+n[0],t[1]=r[1]+n[1],t[2]=r[2]+n[2],t[3]=r[3]+n[3],t[4]=r[4]+n[4],t[5]=r[5]+n[5],t}function ft(t,r,n){return t[0]=r[0]-n[0],t[1]=r[1]-n[1],t[2]=r[2]-n[2],t[3]=r[3]-n[3],t[4]=r[4]-n[4],t[5]=r[5]-n[5],t}function lt(t,r,n){return t[0]=r[0]*n,t[1]=r[1]*n,t[2]=r[2]*n,t[3]=r[3]*n,t[4]=r[4]*n,t[5]=r[5]*n,t}function ht(t,r,n,e){return t[0]=r[0]+n[0]*e,t[1]=r[1]+n[1]*e,t[2]=r[2]+n[2]*e,t[3]=r[3]+n[3]*e,t[4]=r[4]+n[4]*e,t[5]=r[5]+n[5]*e,t}function vt(t,r){return t[0]===r[0]&&t[1]===r[1]&&t[2]===r[2]&&t[3]===r[3]&&t[4]===r[4]&&t[5]===r[5]}function Mt(t,r){var n=t[0],e=t[1],a=t[2],i=t[3],o=t[4],u=t[5],s=r[0],c=r[1],f=r[2],l=r[3],h=r[4],M=r[5];return Math.abs(n-s)<=v*Math.max(1,Math.abs(n),Math.abs(s))&&Math.abs(e-c)<=v*Math.max(1,Math.abs(e),Math.abs(c))&&Math.abs(a-f)<=v*Math.max(1,Math.abs(a),Math.abs(f))&&Math.abs(i-l)<=v*Math.max(1,Math.abs(i),Math.abs(l))&&Math.abs(o-h)<=v*Math.max(1,Math.abs(o),Math.abs(h))&&Math.abs(u-M)<=v*Math.max(1,Math.abs(u),Math.abs(M))}var dt=tt,mt=ft;function pt(){var t=new M(9);return M!=Float32Array&&(t[1]=0,t[2]=0,t[3]=0,t[5]=0,t[6]=0,t[7]=0),t[0]=1,t[4]=1,t[8]=1,t}function gt(t,r){return t[0]=r[0],t[1]=r[1],t[2]=r[2],t[3]=r[4],t[4]=r[5],t[5]=r[6],t[6]=r[8],t[7]=r[9],t[8]=r[10],t}function bt(t){var r=new M(9);return r[0]=t[0],r[1]=t[1],r[2]=t[2],r[3]=t[3],r[4]=t[4],r[5]=t[5],r[6]=t[6],r[7]=t[7],r[8]=t[8],r}function yt(t,r){return t[0]=r[0],t[1]=r[1],t[2]=r[2],t[3]=r[3],t[4]=r[4],t[5]=r[5],t[6]=r[6],t[7]=r[7],t[8]=r[8],t}function Et(t,r,n,e,a,i,o,u,s){var c=new M(9);return c[0]=t,c[1]=r,c[2]=n,c[3]=e,c[4]=a,c[5]=i,c[6]=o,c[7]=u,c[8]=s,c}function xt(t,r,n,e,a,i,o,u,s,c){return t[0]=r,t[1]=n,t[2]=e,t[3]=a,t[4]=i,t[5]=o,t[6]=u,t[7]=s,t[8]=c,t}function Tt(t){return t[0]=1,t[1]=0,t[2]=0,t[3]=0,t[4]=1,t[5]=0,t[6]=0,t[7]=0,t[8]=1,t}function At(t,r){if(t===r){var n=r[1],e=r[2],a=r[5];t[1]=r[3],t[2]=r[6],t[3]=n,t[5]=r[7],t[6]=e,t[7]=a}else t[0]=r[0],t[1]=r[3],t[2]=r[6],t[3]=r[1],t[4]=r[4],t[5]=r[7],t[6]=r[2],t[7]=r[5],t[8]=r[8];return t}function Pt(t,r){var n=r[0],e=r[1],a=r[2],i=r[3],o=r[4],u=r[5],s=r[6],c=r[7],f=r[8],l=f*o-u*c,h=-f*i+u*s,v=c*i-o*s,M=n*l+e*h+a*v;return M?(M=1/M,t[0]=l*M,t[1]=(-f*e+a*c)*M,t[2]=(u*e-a*o)*M,t[3]=h*M,t[4]=(f*n-a*s)*M,t[5]=(-u*n+a*i)*M,t[6]=v*M,t[7]=(-c*n+e*s)*M,t[8]=(o*n-e*i)*M,t):null}function Rt(t,r){var n=r[0],e=r[1],a=r[2],i=r[3],o=r[4],u=r[5],s=r[6],c=r[7],f=r[8];return t[0]=o*f-u*c,t[1]=a*c-e*f,t[2]=e*u-a*o,t[3]=u*s-i*f,t[4]=n*f-a*s,t[5]=a*i-n*u,t[6]=i*c-o*s,t[7]=e*s-n*c,t[8]=n*o-e*i,t}function _t(t){var r=t[0],n=t[1],e=t[2],a=t[3],i=t[4],o=t[5],u=t[6],s=t[7],c=t[8];return r*(c*i-o*s)+n*(-c*a+o*u)+e*(s*a-i*u)}function St(t,r,n){var e=r[0],a=r[1],i=r[2],o=r[3],u=r[4],s=r[5],c=r[6],f=r[7],l=r[8],h=n[0],v=n[1],M=n[2],d=n[3],m=n[4],p=n[5],g=n[6],b=n[7],y=n[8];return t[0]=h*e+v*o+M*c,t[1]=h*a+v*u+M*f,t[2]=h*i+v*s+M*l,t[3]=d*e+m*o+p*c,t[4]=d*a+m*u+p*f,t[5]=d*i+m*s+p*l,t[6]=g*e+b*o+y*c,t[7]=g*a+b*u+y*f,t[8]=g*i+b*s+y*l,t}function Lt(t,r,n){var e=r[0],a=r[1],i=r[2],o=r[3],u=r[4],s=r[5],c=r[6],f=r[7],l=r[8],h=n[0],v=n[1];return t[0]=e,t[1]=a,t[2]=i,t[3]=o,t[4]=u,t[5]=s,t[6]=h*e+v*o+c,t[7]=h*a+v*u+f,t[8]=h*i+v*s+l,t}function It(t,r,n){var e=r[0],a=r[1],i=r[2],o=r[3],u=r[4],s=r[5],c=r[6],f=r[7],l=r[8],h=Math.sin(n),v=Math.cos(n);return t[0]=v*e+h*o,t[1]=v*a+h*u,t[2]=v*i+h*s,t[3]=v*o-h*e,t[4]=v*u-h*a,t[5]=v*s-h*i,t[6]=c,t[7]=f,t[8]=l,t}function wt(t,r,n){var e=n[0],a=n[1];return t[0]=e*r[0],t[1]=e*r[1],t[2]=e*r[2],t[3]=a*r[3],t[4]=a*r[4],t[5]=a*r[5],t[6]=r[6],t[7]=r[7],t[8]=r[8],t}function Dt(t,r){return t[0]=1,t[1]=0,t[2]=0,t[3]=0,t[4]=1,t[5]=0,t[6]=r[0],t[7]=r[1],t[8]=1,t}function Ut(t,r){var n=Math.sin(r),e=Math.cos(r);return t[0]=e,t[1]=n,t[2]=0,t[3]=-n,t[4]=e,t[5]=0,t[6]=0,t[7]=0,t[8]=1,t}function Ct(t,r){return t[0]=r[0],t[1]=0,t[2]=0,t[3]=0,t[4]=r[1],t[5]=0,t[6]=0,t[7]=0,t[8]=1,t}function Ft(t,r){return t[0]=r[0],t[1]=r[1],t[2]=0,t[3]=r[2],t[4]=r[3],t[5]=0,t[6]=r[4],t[7]=r[5],t[8]=1,t}function Ot(t,r){var n=r[0],e=r[1],a=r[2],i=r[3],o=n+n,u=e+e,s=a+a,c=n*o,f=e*o,l=e*u,h=a*o,v=a*u,M=a*s,d=i*o,m=i*u,p=i*s;return t[0]=1-l-M,t[3]=f-p,t[6]=h+m,t[1]=f+p,t[4]=1-c-M,t[7]=v-d,t[2]=h-m,t[5]=v+d,t[8]=1-c-l,t}function qt(t,r){var n=r[0],e=r[1],a=r[2],i=r[3],o=r[4],u=r[5],s=r[6],c=r[7],f=r[8],l=r[9],h=r[10],v=r[11],M=r[12],d=r[13],m=r[14],p=r[15],g=n*u-e*o,b=n*s-a*o,y=n*c-i*o,E=e*s-a*u,x=e*c-i*u,T=a*c-i*s,A=f*d-l*M,P=f*m-h*M,R=f*p-v*M,_=l*m-h*d,S=l*p-v*d,L=h*p-v*m,I=g*L-b*S+y*_+E*R-x*P+T*A;return I?(I=1/I,t[0]=(u*L-s*S+c*_)*I,t[1]=(s*R-o*L-c*P)*I,t[2]=(o*S-u*R+c*A)*I,t[3]=(a*S-e*L-i*_)*I,t[4]=(n*L-a*R+i*P)*I,t[5]=(e*R-n*S-i*A)*I,t[6]=(d*T-m*x+p*E)*I,t[7]=(m*y-M*T-p*b)*I,t[8]=(M*x-d*y+p*g)*I,t):null}function Nt(t,r,n){return t[0]=2/r,t[1]=0,t[2]=0,t[3]=0,t[4]=-2/n,t[5]=0,t[6]=-1,t[7]=1,t[8]=1,t}function Vt(t){return"mat3("+t[0]+", "+t[1]+", "+t[2]+", "+t[3]+", "+t[4]+", "+t[5]+", "+t[6]+", "+t[7]+", "+t[8]+")"}function Bt(t){return Math.hypot(t[0],t[1],t[2],t[3],t[4],t[5],t[6],t[7],t[8])}function Ht(t,r,n){return t[0]=r[0]+n[0],t[1]=r[1]+n[1],t[2]=r[2]+n[2],t[3]=r[3]+n[3],t[4]=r[4]+n[4],t[5]=r[5]+n[5],t[6]=r[6]+n[6],t[7]=r[7]+n[7],t[8]=r[8]+n[8],t}function jt(t,r,n){return t[0]=r[0]-n[0],t[1]=r[1]-n[1],t[2]=r[2]-n[2],t[3]=r[3]-n[3],t[4]=r[4]-n[4],t[5]=r[5]-n[5],t[6]=r[6]-n[6],t[7]=r[7]-n[7],t[8]=r[8]-n[8],t}function kt(t,r,n){return t[0]=r[0]*n,t[1]=r[1]*n,t[2]=r[2]*n,t[3]=r[3]*n,t[4]=r[4]*n,t[5]=r[5]*n,t[6]=r[6]*n,t[7]=r[7]*n,t[8]=r[8]*n,t}function Xt(t,r,n,e){return t[0]=r[0]+n[0]*e,t[1]=r[1]+n[1]*e,t[2]=r[2]+n[2]*e,t[3]=r[3]+n[3]*e,t[4]=r[4]+n[4]*e,t[5]=r[5]+n[5]*e,t[6]=r[6]+n[6]*e,t[7]=r[7]+n[7]*e,t[8]=r[8]+n[8]*e,t}function Gt(t,r){return t[0]===r[0]&&t[1]===r[1]&&t[2]===r[2]&&t[3]===r[3]&&t[4]===r[4]&&t[5]===r[5]&&t[6]===r[6]&&t[7]===r[7]&&t[8]===r[8]}function Yt(t,r){var n=t[0],e=t[1],a=t[2],i=t[3],o=t[4],u=t[5],s=t[6],c=t[7],f=t[8],l=r[0],h=r[1],M=r[2],d=r[3],m=r[4],p=r[5],g=r[6],b=r[7],y=r[8];return Math.abs(n-l)<=v*Math.max(1,Math.abs(n),Math.abs(l))&&Math.abs(e-h)<=v*Math.max(1,Math.abs(e),Math.abs(h))&&Math.abs(a-M)<=v*Math.max(1,Math.abs(a),Math.abs(M))&&Math.abs(i-d)<=v*Math.max(1,Math.abs(i),Math.abs(d))&&Math.abs(o-m)<=v*Math.max(1,Math.abs(o),Math.abs(m))&&Math.abs(u-p)<=v*Math.max(1,Math.abs(u),Math.abs(p))&&Math.abs(s-g)<=v*Math.max(1,Math.abs(s),Math.abs(g))&&Math.abs(c-b)<=v*Math.max(1,Math.abs(c),Math.abs(b))&&Math.abs(f-y)<=v*Math.max(1,Math.abs(f),Math.abs(y))}var zt=St,Kt=jt;function Zt(){var t=new M(16);return M!=Float32Array&&(t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[11]=0,t[12]=0,t[13]=0,t[14]=0),t[0]=1,t[5]=1,t[10]=1,t[15]=1,t}function Qt(t){var r=new M(16);return r[0]=t[0],r[1]=t[1],r[2]=t[2],r[3]=t[3],r[4]=t[4],r[5]=t[5],r[6]=t[6],r[7]=t[7],r[8]=t[8],r[9]=t[9],r[10]=t[10],r[11]=t[11],r[12]=t[12],r[13]=t[13],r[14]=t[14],r[15]=t[15],r}function Wt(t,r){return t[0]=r[0],t[1]=r[1],t[2]=r[2],t[3]=r[3],t[4]=r[4],t[5]=r[5],t[6]=r[6],t[7]=r[7],t[8]=r[8],t[9]=r[9],t[10]=r[10],t[11]=r[11],t[12]=r[12],t[13]=r[13],t[14]=r[14],t[15]=r[15],t}function $t(t,r,n,e,a,i,o,u,s,c,f,l,h,v,d,m){var p=new M(16);return p[0]=t,p[1]=r,p[2]=n,p[3]=e,p[4]=a,p[5]=i,p[6]=o,p[7]=u,p[8]=s,p[9]=c,p[10]=f,p[11]=l,p[12]=h,p[13]=v,p[14]=d,p[15]=m,p}function Jt(t,r,n,e,a,i,o,u,s,c,f,l,h,v,M,d,m){return t[0]=r,t[1]=n,t[2]=e,t[3]=a,t[4]=i,t[5]=o,t[6]=u,t[7]=s,t[8]=c,t[9]=f,t[10]=l,t[11]=h,t[12]=v,t[13]=M,t[14]=d,t[15]=m,t}function tr(t){return t[0]=1,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=1,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[10]=1,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t}function rr(t,r){if(t===r){var n=r[1],e=r[2],a=r[3],i=r[6],o=r[7],u=r[11];t[1]=r[4],t[2]=r[8],t[3]=r[12],t[4]=n,t[6]=r[9],t[7]=r[13],t[8]=e,t[9]=i,t[11]=r[14],t[12]=a,t[13]=o,t[14]=u}else t[0]=r[0],t[1]=r[4],t[2]=r[8],t[3]=r[12],t[4]=r[1],t[5]=r[5],t[6]=r[9],t[7]=r[13],t[8]=r[2],t[9]=r[6],t[10]=r[10],t[11]=r[14],t[12]=r[3],t[13]=r[7],t[14]=r[11],t[15]=r[15];return t}function nr(t,r){var n=r[0],e=r[1],a=r[2],i=r[3],o=r[4],u=r[5],s=r[6],c=r[7],f=r[8],l=r[9],h=r[10],v=r[11],M=r[12],d=r[13],m=r[14],p=r[15],g=n*u-e*o,b=n*s-a*o,y=n*c-i*o,E=e*s-a*u,x=e*c-i*u,T=a*c-i*s,A=f*d-l*M,P=f*m-h*M,R=f*p-v*M,_=l*m-h*d,S=l*p-v*d,L=h*p-v*m,I=g*L-b*S+y*_+E*R-x*P+T*A;return I?(I=1/I,t[0]=(u*L-s*S+c*_)*I,t[1]=(a*S-e*L-i*_)*I,t[2]=(d*T-m*x+p*E)*I,t[3]=(h*x-l*T-v*E)*I,t[4]=(s*R-o*L-c*P)*I,t[5]=(n*L-a*R+i*P)*I,t[6]=(m*y-M*T-p*b)*I,t[7]=(f*T-h*y+v*b)*I,t[8]=(o*S-u*R+c*A)*I,t[9]=(e*R-n*S-i*A)*I,t[10]=(M*x-d*y+p*g)*I,t[11]=(l*y-f*x-v*g)*I,t[12]=(u*P-o*_-s*A)*I,t[13]=(n*_-e*P+a*A)*I,t[14]=(d*b-M*E-m*g)*I,t[15]=(f*E-l*b+h*g)*I,t):null}function er(t,r){var n=r[0],e=r[1],a=r[2],i=r[3],o=r[4],u=r[5],s=r[6],c=r[7],f=r[8],l=r[9],h=r[10],v=r[11],M=r[12],d=r[13],m=r[14],p=r[15];return t[0]=u*(h*p-v*m)-l*(s*p-c*m)+d*(s*v-c*h),t[1]=-(e*(h*p-v*m)-l*(a*p-i*m)+d*(a*v-i*h)),t[2]=e*(s*p-c*m)-u*(a*p-i*m)+d*(a*c-i*s),t[3]=-(e*(s*v-c*h)-u*(a*v-i*h)+l*(a*c-i*s)),t[4]=-(o*(h*p-v*m)-f*(s*p-c*m)+M*(s*v-c*h)),t[5]=n*(h*p-v*m)-f*(a*p-i*m)+M*(a*v-i*h),t[6]=-(n*(s*p-c*m)-o*(a*p-i*m)+M*(a*c-i*s)),t[7]=n*(s*v-c*h)-o*(a*v-i*h)+f*(a*c-i*s),t[8]=o*(l*p-v*d)-f*(u*p-c*d)+M*(u*v-c*l),t[9]=-(n*(l*p-v*d)-f*(e*p-i*d)+M*(e*v-i*l)),t[10]=n*(u*p-c*d)-o*(e*p-i*d)+M*(e*c-i*u),t[11]=-(n*(u*v-c*l)-o*(e*v-i*l)+f*(e*c-i*u)),t[12]=-(o*(l*m-h*d)-f*(u*m-s*d)+M*(u*h-s*l)),t[13]=n*(l*m-h*d)-f*(e*m-a*d)+M*(e*h-a*l),t[14]=-(n*(u*m-s*d)-o*(e*m-a*d)+M*(e*s-a*u)),t[15]=n*(u*h-s*l)-o*(e*h-a*l)+f*(e*s-a*u),t}function ar(t){var r=t[0],n=t[1],e=t[2],a=t[3],i=t[4],o=t[5],u=t[6],s=t[7],c=t[8],f=t[9],l=t[10],h=t[11],v=t[12],M=t[13],d=t[14],m=t[15];return(r*o-n*i)*(l*m-h*d)-(r*u-e*i)*(f*m-h*M)+(r*s-a*i)*(f*d-l*M)+(n*u-e*o)*(c*m-h*v)-(n*s-a*o)*(c*d-l*v)+(e*s-a*u)*(c*M-f*v)}function ir(t,r,n){var e=r[0],a=r[1],i=r[2],o=r[3],u=r[4],s=r[5],c=r[6],f=r[7],l=r[8],h=r[9],v=r[10],M=r[11],d=r[12],m=r[13],p=r[14],g=r[15],b=n[0],y=n[1],E=n[2],x=n[3];return t[0]=b*e+y*u+E*l+x*d,t[1]=b*a+y*s+E*h+x*m,t[2]=b*i+y*c+E*v+x*p,t[3]=b*o+y*f+E*M+x*g,b=n[4],y=n[5],E=n[6],x=n[7],t[4]=b*e+y*u+E*l+x*d,t[5]=b*a+y*s+E*h+x*m,t[6]=b*i+y*c+E*v+x*p,t[7]=b*o+y*f+E*M+x*g,b=n[8],y=n[9],E=n[10],x=n[11],t[8]=b*e+y*u+E*l+x*d,t[9]=b*a+y*s+E*h+x*m,t[10]=b*i+y*c+E*v+x*p,t[11]=b*o+y*f+E*M+x*g,b=n[12],y=n[13],E=n[14],x=n[15],t[12]=b*e+y*u+E*l+x*d,t[13]=b*a+y*s+E*h+x*m,t[14]=b*i+y*c+E*v+x*p,t[15]=b*o+y*f+E*M+x*g,t}function or(t,r,n){var e,a,i,o,u,s,c,f,l,h,v,M,d=n[0],m=n[1],p=n[2];return r===t?(t[12]=r[0]*d+r[4]*m+r[8]*p+r[12],t[13]=r[1]*d+r[5]*m+r[9]*p+r[13],t[14]=r[2]*d+r[6]*m+r[10]*p+r[14],t[15]=r[3]*d+r[7]*m+r[11]*p+r[15]):(e=r[0],a=r[1],i=r[2],o=r[3],u=r[4],s=r[5],c=r[6],f=r[7],l=r[8],h=r[9],v=r[10],M=r[11],t[0]=e,t[1]=a,t[2]=i,t[3]=o,t[4]=u,t[5]=s,t[6]=c,t[7]=f,t[8]=l,t[9]=h,t[10]=v,t[11]=M,t[12]=e*d+u*m+l*p+r[12],t[13]=a*d+s*m+h*p+r[13],t[14]=i*d+c*m+v*p+r[14],t[15]=o*d+f*m+M*p+r[15]),t}function ur(t,r,n){var e=n[0],a=n[1],i=n[2];return t[0]=r[0]*e,t[1]=r[1]*e,t[2]=r[2]*e,t[3]=r[3]*e,t[4]=r[4]*a,t[5]=r[5]*a,t[6]=r[6]*a,t[7]=r[7]*a,t[8]=r[8]*i,t[9]=r[9]*i,t[10]=r[10]*i,t[11]=r[11]*i,t[12]=r[12],t[13]=r[13],t[14]=r[14],t[15]=r[15],t}function sr(t,r,n,e){var a,i,o,u,s,c,f,l,h,M,d,m,p,g,b,y,E,x,T,A,P,R,_,S,L=e[0],I=e[1],w=e[2],D=Math.hypot(L,I,w);return D<v?null:(L*=D=1/D,I*=D,w*=D,a=Math.sin(n),o=1-(i=Math.cos(n)),u=r[0],s=r[1],c=r[2],f=r[3],l=r[4],h=r[5],M=r[6],d=r[7],m=r[8],p=r[9],g=r[10],b=r[11],y=L*L*o+i,E=I*L*o+w*a,x=w*L*o-I*a,T=L*I*o-w*a,A=I*I*o+i,P=w*I*o+L*a,R=L*w*o+I*a,_=I*w*o-L*a,S=w*w*o+i,t[0]=u*y+l*E+m*x,t[1]=s*y+h*E+p*x,t[2]=c*y+M*E+g*x,t[3]=f*y+d*E+b*x,t[4]=u*T+l*A+m*P,t[5]=s*T+h*A+p*P,t[6]=c*T+M*A+g*P,t[7]=f*T+d*A+b*P,t[8]=u*R+l*_+m*S,t[9]=s*R+h*_+p*S,t[10]=c*R+M*_+g*S,t[11]=f*R+d*_+b*S,r!==t&&(t[12]=r[12],t[13]=r[13],t[14]=r[14],t[15]=r[15]),t)}function cr(t,r,n){var e=Math.sin(n),a=Math.cos(n),i=r[4],o=r[5],u=r[6],s=r[7],c=r[8],f=r[9],l=r[10],h=r[11];return r!==t&&(t[0]=r[0],t[1]=r[1],t[2]=r[2],t[3]=r[3],t[12]=r[12],t[13]=r[13],t[14]=r[14],t[15]=r[15]),t[4]=i*a+c*e,t[5]=o*a+f*e,t[6]=u*a+l*e,t[7]=s*a+h*e,t[8]=c*a-i*e,t[9]=f*a-o*e,t[10]=l*a-u*e,t[11]=h*a-s*e,t}function fr(t,r,n){var e=Math.sin(n),a=Math.cos(n),i=r[0],o=r[1],u=r[2],s=r[3],c=r[8],f=r[9],l=r[10],h=r[11];return r!==t&&(t[4]=r[4],t[5]=r[5],t[6]=r[6],t[7]=r[7],t[12]=r[12],t[13]=r[13],t[14]=r[14],t[15]=r[15]),t[0]=i*a-c*e,t[1]=o*a-f*e,t[2]=u*a-l*e,t[3]=s*a-h*e,t[8]=i*e+c*a,t[9]=o*e+f*a,t[10]=u*e+l*a,t[11]=s*e+h*a,t}function lr(t,r,n){var e=Math.sin(n),a=Math.cos(n),i=r[0],o=r[1],u=r[2],s=r[3],c=r[4],f=r[5],l=r[6],h=r[7];return r!==t&&(t[8]=r[8],t[9]=r[9],t[10]=r[10],t[11]=r[11],t[12]=r[12],t[13]=r[13],t[14]=r[14],t[15]=r[15]),t[0]=i*a+c*e,t[1]=o*a+f*e,t[2]=u*a+l*e,t[3]=s*a+h*e,t[4]=c*a-i*e,t[5]=f*a-o*e,t[6]=l*a-u*e,t[7]=h*a-s*e,t}function hr(t,r){return t[0]=1,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=1,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[10]=1,t[11]=0,t[12]=r[0],t[13]=r[1],t[14]=r[2],t[15]=1,t}function vr(t,r){return t[0]=r[0],t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=r[1],t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[10]=r[2],t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t}function Mr(t,r,n){var e,a,i,o=n[0],u=n[1],s=n[2],c=Math.hypot(o,u,s);return c<v?null:(o*=c=1/c,u*=c,s*=c,e=Math.sin(r),i=1-(a=Math.cos(r)),t[0]=o*o*i+a,t[1]=u*o*i+s*e,t[2]=s*o*i-u*e,t[3]=0,t[4]=o*u*i-s*e,t[5]=u*u*i+a,t[6]=s*u*i+o*e,t[7]=0,t[8]=o*s*i+u*e,t[9]=u*s*i-o*e,t[10]=s*s*i+a,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t)}function dr(t,r){var n=Math.sin(r),e=Math.cos(r);return t[0]=1,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=e,t[6]=n,t[7]=0,t[8]=0,t[9]=-n,t[10]=e,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t}function mr(t,r){var n=Math.sin(r),e=Math.cos(r);return t[0]=e,t[1]=0,t[2]=-n,t[3]=0,t[4]=0,t[5]=1,t[6]=0,t[7]=0,t[8]=n,t[9]=0,t[10]=e,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t}function pr(t,r){var n=Math.sin(r),e=Math.cos(r);return t[0]=e,t[1]=n,t[2]=0,t[3]=0,t[4]=-n,t[5]=e,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[10]=1,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t}function gr(t,r,n){var e=r[0],a=r[1],i=r[2],o=r[3],u=e+e,s=a+a,c=i+i,f=e*u,l=e*s,h=e*c,v=a*s,M=a*c,d=i*c,m=o*u,p=o*s,g=o*c;return t[0]=1-(v+d),t[1]=l+g,t[2]=h-p,t[3]=0,t[4]=l-g,t[5]=1-(f+d),t[6]=M+m,t[7]=0,t[8]=h+p,t[9]=M-m,t[10]=1-(f+v),t[11]=0,t[12]=n[0],t[13]=n[1],t[14]=n[2],t[15]=1,t}function br(t,r){var n=new M(3),e=-r[0],a=-r[1],i=-r[2],o=r[3],u=r[4],s=r[5],c=r[6],f=r[7],l=e*e+a*a+i*i+o*o;return l>0?(n[0]=2*(u*o+f*e+s*i-c*a)/l,n[1]=2*(s*o+f*a+c*e-u*i)/l,n[2]=2*(c*o+f*i+u*a-s*e)/l):(n[0]=2*(u*o+f*e+s*i-c*a),n[1]=2*(s*o+f*a+c*e-u*i),n[2]=2*(c*o+f*i+u*a-s*e)),gr(t,r,n),t}function yr(t,r){return t[0]=r[12],t[1]=r[13],t[2]=r[14],t}function Er(t,r){var n=r[0],e=r[1],a=r[2],i=r[4],o=r[5],u=r[6],s=r[8],c=r[9],f=r[10];return t[0]=Math.hypot(n,e,a),t[1]=Math.hypot(i,o,u),t[2]=Math.hypot(s,c,f),t}function xr(t,r){var n=new M(3);Er(n,r);var e=1/n[0],a=1/n[1],i=1/n[2],o=r[0]*e,u=r[1]*a,s=r[2]*i,c=r[4]*e,f=r[5]*a,l=r[6]*i,h=r[8]*e,v=r[9]*a,d=r[10]*i,m=o+f+d,p=0;return m>0?(p=2*Math.sqrt(m+1),t[3]=.25*p,t[0]=(l-v)/p,t[1]=(h-s)/p,t[2]=(u-c)/p):o>f&&o>d?(p=2*Math.sqrt(1+o-f-d),t[3]=(l-v)/p,t[0]=.25*p,t[1]=(u+c)/p,t[2]=(h+s)/p):f>d?(p=2*Math.sqrt(1+f-o-d),t[3]=(h-s)/p,t[0]=(u+c)/p,t[1]=.25*p,t[2]=(l+v)/p):(p=2*Math.sqrt(1+d-o-f),t[3]=(u-c)/p,t[0]=(h+s)/p,t[1]=(l+v)/p,t[2]=.25*p),t}function Tr(t,r,n,e){var a=r[0],i=r[1],o=r[2],u=r[3],s=a+a,c=i+i,f=o+o,l=a*s,h=a*c,v=a*f,M=i*c,d=i*f,m=o*f,p=u*s,g=u*c,b=u*f,y=e[0],E=e[1],x=e[2];return t[0]=(1-(M+m))*y,t[1]=(h+b)*y,t[2]=(v-g)*y,t[3]=0,t[4]=(h-b)*E,t[5]=(1-(l+m))*E,t[6]=(d+p)*E,t[7]=0,t[8]=(v+g)*x,t[9]=(d-p)*x,t[10]=(1-(l+M))*x,t[11]=0,t[12]=n[0],t[13]=n[1],t[14]=n[2],t[15]=1,t}function Ar(t,r,n,e,a){var i=r[0],o=r[1],u=r[2],s=r[3],c=i+i,f=o+o,l=u+u,h=i*c,v=i*f,M=i*l,d=o*f,m=o*l,p=u*l,g=s*c,b=s*f,y=s*l,E=e[0],x=e[1],T=e[2],A=a[0],P=a[1],R=a[2],_=(1-(d+p))*E,S=(v+y)*E,L=(M-b)*E,I=(v-y)*x,w=(1-(h+p))*x,D=(m+g)*x,U=(M+b)*T,C=(m-g)*T,F=(1-(h+d))*T;return t[0]=_,t[1]=S,t[2]=L,t[3]=0,t[4]=I,t[5]=w,t[6]=D,t[7]=0,t[8]=U,t[9]=C,t[10]=F,t[11]=0,t[12]=n[0]+A-(_*A+I*P+U*R),t[13]=n[1]+P-(S*A+w*P+C*R),t[14]=n[2]+R-(L*A+D*P+F*R),t[15]=1,t}function Pr(t,r){var n=r[0],e=r[1],a=r[2],i=r[3],o=n+n,u=e+e,s=a+a,c=n*o,f=e*o,l=e*u,h=a*o,v=a*u,M=a*s,d=i*o,m=i*u,p=i*s;return t[0]=1-l-M,t[1]=f+p,t[2]=h-m,t[3]=0,t[4]=f-p,t[5]=1-c-M,t[6]=v+d,t[7]=0,t[8]=h+m,t[9]=v-d,t[10]=1-c-l,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t}function Rr(t,r,n,e,a,i,o){var u=1/(n-r),s=1/(a-e),c=1/(i-o);return t[0]=2*i*u,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=2*i*s,t[6]=0,t[7]=0,t[8]=(n+r)*u,t[9]=(a+e)*s,t[10]=(o+i)*c,t[11]=-1,t[12]=0,t[13]=0,t[14]=o*i*2*c,t[15]=0,t}function _r(t,r,n,e,a){var i,o=1/Math.tan(r/2);return t[0]=o/n,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=o,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[11]=-1,t[12]=0,t[13]=0,t[15]=0,null!=a&&a!==1/0?(i=1/(e-a),t[10]=(a+e)*i,t[14]=2*a*e*i):(t[10]=-1,t[14]=-2*e),t}var Sr=_r;function Lr(t,r,n,e,a){var i,o=1/Math.tan(r/2);return t[0]=o/n,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=o,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[11]=-1,t[12]=0,t[13]=0,t[15]=0,null!=a&&a!==1/0?(i=1/(e-a),t[10]=a*i,t[14]=a*e*i):(t[10]=-1,t[14]=-e),t}function Ir(t,r,n,e){var a=Math.tan(r.upDegrees*Math.PI/180),i=Math.tan(r.downDegrees*Math.PI/180),o=Math.tan(r.leftDegrees*Math.PI/180),u=Math.tan(r.rightDegrees*Math.PI/180),s=2/(o+u),c=2/(a+i);return t[0]=s,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=c,t[6]=0,t[7]=0,t[8]=-(o-u)*s*.5,t[9]=(a-i)*c*.5,t[10]=e/(n-e),t[11]=-1,t[12]=0,t[13]=0,t[14]=e*n/(n-e),t[15]=0,t}function wr(t,r,n,e,a,i,o){var u=1/(r-n),s=1/(e-a),c=1/(i-o);return t[0]=-2*u,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=-2*s,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[10]=2*c,t[11]=0,t[12]=(r+n)*u,t[13]=(a+e)*s,t[14]=(o+i)*c,t[15]=1,t}var Dr=wr;function Ur(t,r,n,e,a,i,o){var u=1/(r-n),s=1/(e-a),c=1/(i-o);return t[0]=-2*u,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=-2*s,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[10]=c,t[11]=0,t[12]=(r+n)*u,t[13]=(a+e)*s,t[14]=i*c,t[15]=1,t}function Cr(t,r,n,e){var a,i,o,u,s,c,f,l,h,M,d=r[0],m=r[1],p=r[2],g=e[0],b=e[1],y=e[2],E=n[0],x=n[1],T=n[2];return Math.abs(d-E)<v&&Math.abs(m-x)<v&&Math.abs(p-T)<v?tr(t):(f=d-E,l=m-x,h=p-T,a=b*(h*=M=1/Math.hypot(f,l,h))-y*(l*=M),i=y*(f*=M)-g*h,o=g*l-b*f,(M=Math.hypot(a,i,o))?(a*=M=1/M,i*=M,o*=M):(a=0,i=0,o=0),u=l*o-h*i,s=h*a-f*o,c=f*i-l*a,(M=Math.hypot(u,s,c))?(u*=M=1/M,s*=M,c*=M):(u=0,s=0,c=0),t[0]=a,t[1]=u,t[2]=f,t[3]=0,t[4]=i,t[5]=s,t[6]=l,t[7]=0,t[8]=o,t[9]=c,t[10]=h,t[11]=0,t[12]=-(a*d+i*m+o*p),t[13]=-(u*d+s*m+c*p),t[14]=-(f*d+l*m+h*p),t[15]=1,t)}function Fr(t,r,n,e){var a=r[0],i=r[1],o=r[2],u=e[0],s=e[1],c=e[2],f=a-n[0],l=i-n[1],h=o-n[2],v=f*f+l*l+h*h;v>0&&(f*=v=1/Math.sqrt(v),l*=v,h*=v);var M=s*h-c*l,d=c*f-u*h,m=u*l-s*f;return(v=M*M+d*d+m*m)>0&&(M*=v=1/Math.sqrt(v),d*=v,m*=v),t[0]=M,t[1]=d,t[2]=m,t[3]=0,t[4]=l*m-h*d,t[5]=h*M-f*m,t[6]=f*d-l*M,t[7]=0,t[8]=f,t[9]=l,t[10]=h,t[11]=0,t[12]=a,t[13]=i,t[14]=o,t[15]=1,t}function Or(t){return"mat4("+t[0]+", "+t[1]+", "+t[2]+", "+t[3]+", "+t[4]+", "+t[5]+", "+t[6]+", "+t[7]+", "+t[8]+", "+t[9]+", "+t[10]+", "+t[11]+", "+t[12]+", "+t[13]+", "+t[14]+", "+t[15]+")"}function qr(t){return Math.hypot(t[0],t[1],t[2],t[3],t[4],t[5],t[6],t[7],t[8],t[9],t[10],t[11],t[12],t[13],t[14],t[15])}function Nr(t,r,n){return t[0]=r[0]+n[0],t[1]=r[1]+n[1],t[2]=r[2]+n[2],t[3]=r[3]+n[3],t[4]=r[4]+n[4],t[5]=r[5]+n[5],t[6]=r[6]+n[6],t[7]=r[7]+n[7],t[8]=r[8]+n[8],t[9]=r[9]+n[9],t[10]=r[10]+n[10],t[11]=r[11]+n[11],t[12]=r[12]+n[12],t[13]=r[13]+n[13],t[14]=r[14]+n[14],t[15]=r[15]+n[15],t}function Vr(t,r,n){return t[0]=r[0]-n[0],t[1]=r[1]-n[1],t[2]=r[2]-n[2],t[3]=r[3]-n[3],t[4]=r[4]-n[4],t[5]=r[5]-n[5],t[6]=r[6]-n[6],t[7]=r[7]-n[7],t[8]=r[8]-n[8],t[9]=r[9]-n[9],t[10]=r[10]-n[10],t[11]=r[11]-n[11],t[12]=r[12]-n[12],t[13]=r[13]-n[13],t[14]=r[14]-n[14],t[15]=r[15]-n[15],t}function Br(t,r,n){return t[0]=r[0]*n,t[1]=r[1]*n,t[2]=r[2]*n,t[3]=r[3]*n,t[4]=r[4]*n,t[5]=r[5]*n,t[6]=r[6]*n,t[7]=r[7]*n,t[8]=r[8]*n,t[9]=r[9]*n,t[10]=r[10]*n,t[11]=r[11]*n,t[12]=r[12]*n,t[13]=r[13]*n,t[14]=r[14]*n,t[15]=r[15]*n,t}function Hr(t,r,n,e){return t[0]=r[0]+n[0]*e,t[1]=r[1]+n[1]*e,t[2]=r[2]+n[2]*e,t[3]=r[3]+n[3]*e,t[4]=r[4]+n[4]*e,t[5]=r[5]+n[5]*e,t[6]=r[6]+n[6]*e,t[7]=r[7]+n[7]*e,t[8]=r[8]+n[8]*e,t[9]=r[9]+n[9]*e,t[10]=r[10]+n[10]*e,t[11]=r[11]+n[11]*e,t[12]=r[12]+n[12]*e,t[13]=r[13]+n[13]*e,t[14]=r[14]+n[14]*e,t[15]=r[15]+n[15]*e,t}function jr(t,r){return t[0]===r[0]&&t[1]===r[1]&&t[2]===r[2]&&t[3]===r[3]&&t[4]===r[4]&&t[5]===r[5]&&t[6]===r[6]&&t[7]===r[7]&&t[8]===r[8]&&t[9]===r[9]&&t[10]===r[10]&&t[11]===r[11]&&t[12]===r[12]&&t[13]===r[13]&&t[14]===r[14]&&t[15]===r[15]}function kr(t,r){var n=t[0],e=t[1],a=t[2],i=t[3],o=t[4],u=t[5],s=t[6],c=t[7],f=t[8],l=t[9],h=t[10],M=t[11],d=t[12],m=t[13],p=t[14],g=t[15],b=r[0],y=r[1],E=r[2],x=r[3],T=r[4],A=r[5],P=r[6],R=r[7],_=r[8],S=r[9],L=r[10],I=r[11],w=r[12],D=r[13],U=r[14],C=r[15];return Math.abs(n-b)<=v*Math.max(1,Math.abs(n),Math.abs(b))&&Math.abs(e-y)<=v*Math.max(1,Math.abs(e),Math.abs(y))&&Math.abs(a-E)<=v*Math.max(1,Math.abs(a),Math.abs(E))&&Math.abs(i-x)<=v*Math.max(1,Math.abs(i),Math.abs(x))&&Math.abs(o-T)<=v*Math.max(1,Math.abs(o),Math.abs(T))&&Math.abs(u-A)<=v*Math.max(1,Math.abs(u),Math.abs(A))&&Math.abs(s-P)<=v*Math.max(1,Math.abs(s),Math.abs(P))&&Math.abs(c-R)<=v*Math.max(1,Math.abs(c),Math.abs(R))&&Math.abs(f-_)<=v*Math.max(1,Math.abs(f),Math.abs(_))&&Math.abs(l-S)<=v*Math.max(1,Math.abs(l),Math.abs(S))&&Math.abs(h-L)<=v*Math.max(1,Math.abs(h),Math.abs(L))&&Math.abs(M-I)<=v*Math.max(1,Math.abs(M),Math.abs(I))&&Math.abs(d-w)<=v*Math.max(1,Math.abs(d),Math.abs(w))&&Math.abs(m-D)<=v*Math.max(1,Math.abs(m),Math.abs(D))&&Math.abs(p-U)<=v*Math.max(1,Math.abs(p),Math.abs(U))&&Math.abs(g-C)<=v*Math.max(1,Math.abs(g),Math.abs(C))}var Xr=ir,Gr=Vr;function Yr(){var t=new M(3);return M!=Float32Array&&(t[0]=0,t[1]=0,t[2]=0),t}function zr(t){var r=new M(3);return r[0]=t[0],r[1]=t[1],r[2]=t[2],r}function Kr(t){var r=t[0],n=t[1],e=t[2];return Math.hypot(r,n,e)}function Zr(t,r,n){var e=new M(3);return e[0]=t,e[1]=r,e[2]=n,e}function Qr(t,r){return t[0]=r[0],t[1]=r[1],t[2]=r[2],t}function Wr(t,r,n,e){return t[0]=r,t[1]=n,t[2]=e,t}function $r(t,r,n){return t[0]=r[0]+n[0],t[1]=r[1]+n[1],t[2]=r[2]+n[2],t}function Jr(t,r,n){return t[0]=r[0]-n[0],t[1]=r[1]-n[1],t[2]=r[2]-n[2],t}function tn(t,r,n){return t[0]=r[0]*n[0],t[1]=r[1]*n[1],t[2]=r[2]*n[2],t}function rn(t,r,n){return t[0]=r[0]/n[0],t[1]=r[1]/n[1],t[2]=r[2]/n[2],t}function nn(t,r){return t[0]=Math.ceil(r[0]),t[1]=Math.ceil(r[1]),t[2]=Math.ceil(r[2]),t}function en(t,r){return t[0]=Math.floor(r[0]),t[1]=Math.floor(r[1]),t[2]=Math.floor(r[2]),t}function an(t,r,n){return t[0]=Math.min(r[0],n[0]),t[1]=Math.min(r[1],n[1]),t[2]=Math.min(r[2],n[2]),t}function on(t,r,n){return t[0]=Math.max(r[0],n[0]),t[1]=Math.max(r[1],n[1]),t[2]=Math.max(r[2],n[2]),t}function un(t,r){return t[0]=Math.round(r[0]),t[1]=Math.round(r[1]),t[2]=Math.round(r[2]),t}function sn(t,r,n){return t[0]=r[0]*n,t[1]=r[1]*n,t[2]=r[2]*n,t}function cn(t,r,n,e){return t[0]=r[0]+n[0]*e,t[1]=r[1]+n[1]*e,t[2]=r[2]+n[2]*e,t}function fn(t,r){var n=r[0]-t[0],e=r[1]-t[1],a=r[2]-t[2];return Math.hypot(n,e,a)}function ln(t,r){var n=r[0]-t[0],e=r[1]-t[1],a=r[2]-t[2];return n*n+e*e+a*a}function hn(t){var r=t[0],n=t[1],e=t[2];return r*r+n*n+e*e}function vn(t,r){return t[0]=-r[0],t[1]=-r[1],t[2]=-r[2],t}function Mn(t,r){return t[0]=1/r[0],t[1]=1/r[1],t[2]=1/r[2],t}function dn(t,r){var n=r[0],e=r[1],a=r[2],i=n*n+e*e+a*a;return i>0&&(i=1/Math.sqrt(i)),t[0]=r[0]*i,t[1]=r[1]*i,t[2]=r[2]*i,t}function mn(t,r){return t[0]*r[0]+t[1]*r[1]+t[2]*r[2]}function pn(t,r,n){var e=r[0],a=r[1],i=r[2],o=n[0],u=n[1],s=n[2];return t[0]=a*s-i*u,t[1]=i*o-e*s,t[2]=e*u-a*o,t}function gn(t,r,n,e){var a=r[0],i=r[1],o=r[2];return t[0]=a+e*(n[0]-a),t[1]=i+e*(n[1]-i),t[2]=o+e*(n[2]-o),t}function bn(t,r,n,e,a,i){var o=i*i,u=o*(2*i-3)+1,s=o*(i-2)+i,c=o*(i-1),f=o*(3-2*i);return t[0]=r[0]*u+n[0]*s+e[0]*c+a[0]*f,t[1]=r[1]*u+n[1]*s+e[1]*c+a[1]*f,t[2]=r[2]*u+n[2]*s+e[2]*c+a[2]*f,t}function yn(t,r,n,e,a,i){var o=1-i,u=o*o,s=i*i,c=u*o,f=3*i*u,l=3*s*o,h=s*i;return t[0]=r[0]*c+n[0]*f+e[0]*l+a[0]*h,t[1]=r[1]*c+n[1]*f+e[1]*l+a[1]*h,t[2]=r[2]*c+n[2]*f+e[2]*l+a[2]*h,t}function En(t,r){r=r||1;var n=2*d()*Math.PI,e=2*d()-1,a=Math.sqrt(1-e*e)*r;return t[0]=Math.cos(n)*a,t[1]=Math.sin(n)*a,t[2]=e*r,t}function xn(t,r,n){var e=r[0],a=r[1],i=r[2],o=n[3]*e+n[7]*a+n[11]*i+n[15];return o=o||1,t[0]=(n[0]*e+n[4]*a+n[8]*i+n[12])/o,t[1]=(n[1]*e+n[5]*a+n[9]*i+n[13])/o,t[2]=(n[2]*e+n[6]*a+n[10]*i+n[14])/o,t}function Tn(t,r,n){var e=r[0],a=r[1],i=r[2];return t[0]=e*n[0]+a*n[3]+i*n[6],t[1]=e*n[1]+a*n[4]+i*n[7],t[2]=e*n[2]+a*n[5]+i*n[8],t}function An(t,r,n){var e=n[0],a=n[1],i=n[2],o=n[3],u=r[0],s=r[1],c=r[2],f=a*c-i*s,l=i*u-e*c,h=e*s-a*u,v=a*h-i*l,M=i*f-e*h,d=e*l-a*f,m=2*o;return f*=m,l*=m,h*=m,v*=2,M*=2,d*=2,t[0]=u+f+v,t[1]=s+l+M,t[2]=c+h+d,t}function Pn(t,r,n,e){var a=[],i=[];return a[0]=r[0]-n[0],a[1]=r[1]-n[1],a[2]=r[2]-n[2],i[0]=a[0],i[1]=a[1]*Math.cos(e)-a[2]*Math.sin(e),i[2]=a[1]*Math.sin(e)+a[2]*Math.cos(e),t[0]=i[0]+n[0],t[1]=i[1]+n[1],t[2]=i[2]+n[2],t}function Rn(t,r,n,e){var a=[],i=[];return a[0]=r[0]-n[0],a[1]=r[1]-n[1],a[2]=r[2]-n[2],i[0]=a[2]*Math.sin(e)+a[0]*Math.cos(e),i[1]=a[1],i[2]=a[2]*Math.cos(e)-a[0]*Math.sin(e),t[0]=i[0]+n[0],t[1]=i[1]+n[1],t[2]=i[2]+n[2],t}function _n(t,r,n,e){var a=[],i=[];return a[0]=r[0]-n[0],a[1]=r[1]-n[1],a[2]=r[2]-n[2],i[0]=a[0]*Math.cos(e)-a[1]*Math.sin(e),i[1]=a[0]*Math.sin(e)+a[1]*Math.cos(e),i[2]=a[2],t[0]=i[0]+n[0],t[1]=i[1]+n[1],t[2]=i[2]+n[2],t}function Sn(t,r){var n=t[0],e=t[1],a=t[2],i=r[0],o=r[1],u=r[2],s=Math.sqrt(n*n+e*e+a*a)*Math.sqrt(i*i+o*o+u*u),c=s&&mn(t,r)/s;return Math.acos(Math.min(Math.max(c,-1),1))}function Ln(t){return t[0]=0,t[1]=0,t[2]=0,t}function In(t){return"vec3("+t[0]+", "+t[1]+", "+t[2]+")"}function wn(t,r){return t[0]===r[0]&&t[1]===r[1]&&t[2]===r[2]}function Dn(t,r){var n=t[0],e=t[1],a=t[2],i=r[0],o=r[1],u=r[2];return Math.abs(n-i)<=v*Math.max(1,Math.abs(n),Math.abs(i))&&Math.abs(e-o)<=v*Math.max(1,Math.abs(e),Math.abs(o))&&Math.abs(a-u)<=v*Math.max(1,Math.abs(a),Math.abs(u))}var Un,Cn=Jr,Fn=tn,On=rn,qn=fn,Nn=ln,Vn=Kr,Bn=hn,Hn=(Un=Yr(),function(t,r,n,e,a,i){var o,u;for(r||(r=3),n||(n=0),u=e?Math.min(e*r+n,t.length):t.length,o=n;o<u;o+=r)Un[0]=t[o],Un[1]=t[o+1],Un[2]=t[o+2],a(Un,Un,i),t[o]=Un[0],t[o+1]=Un[1],t[o+2]=Un[2];return t});function jn(){var t=new M(4);return M!=Float32Array&&(t[0]=0,t[1]=0,t[2]=0,t[3]=0),t}function kn(t){var r=new M(4);return r[0]=t[0],r[1]=t[1],r[2]=t[2],r[3]=t[3],r}function Xn(t,r,n,e){var a=new M(4);return a[0]=t,a[1]=r,a[2]=n,a[3]=e,a}function Gn(t,r){return t[0]=r[0],t[1]=r[1],t[2]=r[2],t[3]=r[3],t}function Yn(t,r,n,e,a){return t[0]=r,t[1]=n,t[2]=e,t[3]=a,t}function zn(t,r,n){return t[0]=r[0]+n[0],t[1]=r[1]+n[1],t[2]=r[2]+n[2],t[3]=r[3]+n[3],t}function Kn(t,r,n){return t[0]=r[0]-n[0],t[1]=r[1]-n[1],t[2]=r[2]-n[2],t[3]=r[3]-n[3],t}function Zn(t,r,n){return t[0]=r[0]*n[0],t[1]=r[1]*n[1],t[2]=r[2]*n[2],t[3]=r[3]*n[3],t}function Qn(t,r,n){return t[0]=r[0]/n[0],t[1]=r[1]/n[1],t[2]=r[2]/n[2],t[3]=r[3]/n[3],t}function Wn(t,r){return t[0]=Math.ceil(r[0]),t[1]=Math.ceil(r[1]),t[2]=Math.ceil(r[2]),t[3]=Math.ceil(r[3]),t}function $n(t,r){return t[0]=Math.floor(r[0]),t[1]=Math.floor(r[1]),t[2]=Math.floor(r[2]),t[3]=Math.floor(r[3]),t}function Jn(t,r,n){return t[0]=Math.min(r[0],n[0]),t[1]=Math.min(r[1],n[1]),t[2]=Math.min(r[2],n[2]),t[3]=Math.min(r[3],n[3]),t}function te(t,r,n){return t[0]=Math.max(r[0],n[0]),t[1]=Math.max(r[1],n[1]),t[2]=Math.max(r[2],n[2]),t[3]=Math.max(r[3],n[3]),t}function re(t,r){return t[0]=Math.round(r[0]),t[1]=Math.round(r[1]),t[2]=Math.round(r[2]),t[3]=Math.round(r[3]),t}function ne(t,r,n){return t[0]=r[0]*n,t[1]=r[1]*n,t[2]=r[2]*n,t[3]=r[3]*n,t}function ee(t,r,n,e){return t[0]=r[0]+n[0]*e,t[1]=r[1]+n[1]*e,t[2]=r[2]+n[2]*e,t[3]=r[3]+n[3]*e,t}function ae(t,r){var n=r[0]-t[0],e=r[1]-t[1],a=r[2]-t[2],i=r[3]-t[3];return Math.hypot(n,e,a,i)}function ie(t,r){var n=r[0]-t[0],e=r[1]-t[1],a=r[2]-t[2],i=r[3]-t[3];return n*n+e*e+a*a+i*i}function oe(t){var r=t[0],n=t[1],e=t[2],a=t[3];return Math.hypot(r,n,e,a)}function ue(t){var r=t[0],n=t[1],e=t[2],a=t[3];return r*r+n*n+e*e+a*a}function se(t,r){return t[0]=-r[0],t[1]=-r[1],t[2]=-r[2],t[3]=-r[3],t}function ce(t,r){return t[0]=1/r[0],t[1]=1/r[1],t[2]=1/r[2],t[3]=1/r[3],t}function fe(t,r){var n=r[0],e=r[1],a=r[2],i=r[3],o=n*n+e*e+a*a+i*i;return o>0&&(o=1/Math.sqrt(o)),t[0]=n*o,t[1]=e*o,t[2]=a*o,t[3]=i*o,t}function le(t,r){return t[0]*r[0]+t[1]*r[1]+t[2]*r[2]+t[3]*r[3]}function he(t,r,n,e){var a=n[0]*e[1]-n[1]*e[0],i=n[0]*e[2]-n[2]*e[0],o=n[0]*e[3]-n[3]*e[0],u=n[1]*e[2]-n[2]*e[1],s=n[1]*e[3]-n[3]*e[1],c=n[2]*e[3]-n[3]*e[2],f=r[0],l=r[1],h=r[2],v=r[3];return t[0]=l*c-h*s+v*u,t[1]=-f*c+h*o-v*i,t[2]=f*s-l*o+v*a,t[3]=-f*u+l*i-h*a,t}function ve(t,r,n,e){var a=r[0],i=r[1],o=r[2],u=r[3];return t[0]=a+e*(n[0]-a),t[1]=i+e*(n[1]-i),t[2]=o+e*(n[2]-o),t[3]=u+e*(n[3]-u),t}function Me(t,r){var n,e,a,i,o,u;r=r||1;do{o=(n=2*d()-1)*n+(e=2*d()-1)*e}while(o>=1);do{u=(a=2*d()-1)*a+(i=2*d()-1)*i}while(u>=1);var s=Math.sqrt((1-o)/u);return t[0]=r*n,t[1]=r*e,t[2]=r*a*s,t[3]=r*i*s,t}function de(t,r,n){var e=r[0],a=r[1],i=r[2],o=r[3];return t[0]=n[0]*e+n[4]*a+n[8]*i+n[12]*o,t[1]=n[1]*e+n[5]*a+n[9]*i+n[13]*o,t[2]=n[2]*e+n[6]*a+n[10]*i+n[14]*o,t[3]=n[3]*e+n[7]*a+n[11]*i+n[15]*o,t}function me(t,r,n){var e=r[0],a=r[1],i=r[2],o=n[0],u=n[1],s=n[2],c=n[3],f=c*e+u*i-s*a,l=c*a+s*e-o*i,h=c*i+o*a-u*e,v=-o*e-u*a-s*i;return t[0]=f*c+v*-o+l*-s-h*-u,t[1]=l*c+v*-u+h*-o-f*-s,t[2]=h*c+v*-s+f*-u-l*-o,t[3]=r[3],t}function pe(t){return t[0]=0,t[1]=0,t[2]=0,t[3]=0,t}function ge(t){return"vec4("+t[0]+", "+t[1]+", "+t[2]+", "+t[3]+")"}function be(t,r){return t[0]===r[0]&&t[1]===r[1]&&t[2]===r[2]&&t[3]===r[3]}function ye(t,r){var n=t[0],e=t[1],a=t[2],i=t[3],o=r[0],u=r[1],s=r[2],c=r[3];return Math.abs(n-o)<=v*Math.max(1,Math.abs(n),Math.abs(o))&&Math.abs(e-u)<=v*Math.max(1,Math.abs(e),Math.abs(u))&&Math.abs(a-s)<=v*Math.max(1,Math.abs(a),Math.abs(s))&&Math.abs(i-c)<=v*Math.max(1,Math.abs(i),Math.abs(c))}var Ee=Kn,xe=Zn,Te=Qn,Ae=ae,Pe=ie,Re=oe,_e=ue,Se=function(){var t=jn();return function(r,n,e,a,i,o){var u,s;for(n||(n=4),e||(e=0),s=a?Math.min(a*n+e,r.length):r.length,u=e;u<s;u+=n)t[0]=r[u],t[1]=r[u+1],t[2]=r[u+2],t[3]=r[u+3],i(t,t,o),r[u]=t[0],r[u+1]=t[1],r[u+2]=t[2],r[u+3]=t[3];return r}}();function Le(){var t=new M(4);return M!=Float32Array&&(t[0]=0,t[1]=0,t[2]=0),t[3]=1,t}function Ie(t){return t[0]=0,t[1]=0,t[2]=0,t[3]=1,t}function we(t,r,n){n*=.5;var e=Math.sin(n);return t[0]=e*r[0],t[1]=e*r[1],t[2]=e*r[2],t[3]=Math.cos(n),t}function De(t,r){var n=2*Math.acos(r[3]),e=Math.sin(n/2);return e>v?(t[0]=r[0]/e,t[1]=r[1]/e,t[2]=r[2]/e):(t[0]=1,t[1]=0,t[2]=0),n}function Ue(t,r){var n=sa(t,r);return Math.acos(2*n*n-1)}function Ce(t,r,n){var e=r[0],a=r[1],i=r[2],o=r[3],u=n[0],s=n[1],c=n[2],f=n[3];return t[0]=e*f+o*u+a*c-i*s,t[1]=a*f+o*s+i*u-e*c,t[2]=i*f+o*c+e*s-a*u,t[3]=o*f-e*u-a*s-i*c,t}function Fe(t,r,n){n*=.5;var e=r[0],a=r[1],i=r[2],o=r[3],u=Math.sin(n),s=Math.cos(n);return t[0]=e*s+o*u,t[1]=a*s+i*u,t[2]=i*s-a*u,t[3]=o*s-e*u,t}function Oe(t,r,n){n*=.5;var e=r[0],a=r[1],i=r[2],o=r[3],u=Math.sin(n),s=Math.cos(n);return t[0]=e*s-i*u,t[1]=a*s+o*u,t[2]=i*s+e*u,t[3]=o*s-a*u,t}function qe(t,r,n){n*=.5;var e=r[0],a=r[1],i=r[2],o=r[3],u=Math.sin(n),s=Math.cos(n);return t[0]=e*s+a*u,t[1]=a*s-e*u,t[2]=i*s+o*u,t[3]=o*s-i*u,t}function Ne(t,r){var n=r[0],e=r[1],a=r[2];return t[0]=n,t[1]=e,t[2]=a,t[3]=Math.sqrt(Math.abs(1-n*n-e*e-a*a)),t}function Ve(t,r){var n=r[0],e=r[1],a=r[2],i=r[3],o=Math.sqrt(n*n+e*e+a*a),u=Math.exp(i),s=o>0?u*Math.sin(o)/o:0;return t[0]=n*s,t[1]=e*s,t[2]=a*s,t[3]=u*Math.cos(o),t}function Be(t,r){var n=r[0],e=r[1],a=r[2],i=r[3],o=Math.sqrt(n*n+e*e+a*a),u=o>0?Math.atan2(o,i)/o:0;return t[0]=n*u,t[1]=e*u,t[2]=a*u,t[3]=.5*Math.log(n*n+e*e+a*a+i*i),t}function He(t,r,n){return Be(t,r),ua(t,t,n),Ve(t,t),t}function je(t,r,n,e){var a,i,o,u,s,c=r[0],f=r[1],l=r[2],h=r[3],M=n[0],d=n[1],m=n[2],p=n[3];return(i=c*M+f*d+l*m+h*p)<0&&(i=-i,M=-M,d=-d,m=-m,p=-p),1-i>v?(a=Math.acos(i),o=Math.sin(a),u=Math.sin((1-e)*a)/o,s=Math.sin(e*a)/o):(u=1-e,s=e),t[0]=u*c+s*M,t[1]=u*f+s*d,t[2]=u*l+s*m,t[3]=u*h+s*p,t}function ke(t){var r=d(),n=d(),e=d(),a=Math.sqrt(1-r),i=Math.sqrt(r);return t[0]=a*Math.sin(2*Math.PI*n),t[1]=a*Math.cos(2*Math.PI*n),t[2]=i*Math.sin(2*Math.PI*e),t[3]=i*Math.cos(2*Math.PI*e),t}function Xe(t,r){var n=r[0],e=r[1],a=r[2],i=r[3],o=n*n+e*e+a*a+i*i,u=o?1/o:0;return t[0]=-n*u,t[1]=-e*u,t[2]=-a*u,t[3]=i*u,t}function Ge(t,r){return t[0]=-r[0],t[1]=-r[1],t[2]=-r[2],t[3]=r[3],t}function Ye(t,r){var n,e=r[0]+r[4]+r[8];if(e>0)n=Math.sqrt(e+1),t[3]=.5*n,n=.5/n,t[0]=(r[5]-r[7])*n,t[1]=(r[6]-r[2])*n,t[2]=(r[1]-r[3])*n;else{var a=0;r[4]>r[0]&&(a=1),r[8]>r[3*a+a]&&(a=2);var i=(a+1)%3,o=(a+2)%3;n=Math.sqrt(r[3*a+a]-r[3*i+i]-r[3*o+o]+1),t[a]=.5*n,n=.5/n,t[3]=(r[3*i+o]-r[3*o+i])*n,t[i]=(r[3*i+a]+r[3*a+i])*n,t[o]=(r[3*o+a]+r[3*a+o])*n}return t}function ze(t,r,n,e){var a=.5*Math.PI/180;r*=a,n*=a,e*=a;var i=Math.sin(r),o=Math.cos(r),u=Math.sin(n),s=Math.cos(n),c=Math.sin(e),f=Math.cos(e);return t[0]=i*s*f-o*u*c,t[1]=o*u*f+i*s*c,t[2]=o*s*c-i*u*f,t[3]=o*s*f+i*u*c,t}function Ke(t){return"quat("+t[0]+", "+t[1]+", "+t[2]+", "+t[3]+")"}var Ze,Qe,We,$e,Je,ta,ra=kn,na=Xn,ea=Gn,aa=Yn,ia=zn,oa=Ce,ua=ne,sa=le,ca=ve,fa=oe,la=fa,ha=ue,va=ha,Ma=fe,da=be,ma=ye,pa=(Ze=Yr(),Qe=Zr(1,0,0),We=Zr(0,1,0),function(t,r,n){var e=mn(r,n);return e<-.999999?(pn(Ze,Qe,r),Vn(Ze)<1e-6&&pn(Ze,We,r),dn(Ze,Ze),we(t,Ze,Math.PI),t):e>.999999?(t[0]=0,t[1]=0,t[2]=0,t[3]=1,t):(pn(Ze,r,n),t[0]=Ze[0],t[1]=Ze[1],t[2]=Ze[2],t[3]=1+e,Ma(t,t))}),ga=($e=Le(),Je=Le(),function(t,r,n,e,a,i){return je($e,r,a,i),je(Je,n,e,i),je(t,$e,Je,2*i*(1-i)),t}),ba=(ta=pt(),function(t,r,n,e){return ta[0]=n[0],ta[3]=n[1],ta[6]=n[2],ta[1]=e[0],ta[4]=e[1],ta[7]=e[2],ta[2]=-r[0],ta[5]=-r[1],ta[8]=-r[2],Ma(t,Ye(t,ta))});function ya(){var t=new M(8);return M!=Float32Array&&(t[0]=0,t[1]=0,t[2]=0,t[4]=0,t[5]=0,t[6]=0,t[7]=0),t[3]=1,t}function Ea(t){var r=new M(8);return r[0]=t[0],r[1]=t[1],r[2]=t[2],r[3]=t[3],r[4]=t[4],r[5]=t[5],r[6]=t[6],r[7]=t[7],r}function xa(t,r,n,e,a,i,o,u){var s=new M(8);return s[0]=t,s[1]=r,s[2]=n,s[3]=e,s[4]=a,s[5]=i,s[6]=o,s[7]=u,s}function Ta(t,r,n,e,a,i,o){var u=new M(8);u[0]=t,u[1]=r,u[2]=n,u[3]=e;var s=.5*a,c=.5*i,f=.5*o;return u[4]=s*e+c*n-f*r,u[5]=c*e+f*t-s*n,u[6]=f*e+s*r-c*t,u[7]=-s*t-c*r-f*n,u}function Aa(t,r,n){var e=.5*n[0],a=.5*n[1],i=.5*n[2],o=r[0],u=r[1],s=r[2],c=r[3];return t[0]=o,t[1]=u,t[2]=s,t[3]=c,t[4]=e*c+a*s-i*u,t[5]=a*c+i*o-e*s,t[6]=i*c+e*u-a*o,t[7]=-e*o-a*u-i*s,t}function Pa(t,r){return t[0]=0,t[1]=0,t[2]=0,t[3]=1,t[4]=.5*r[0],t[5]=.5*r[1],t[6]=.5*r[2],t[7]=0,t}function Ra(t,r){return t[0]=r[0],t[1]=r[1],t[2]=r[2],t[3]=r[3],t[4]=0,t[5]=0,t[6]=0,t[7]=0,t}function _a(t,r){var n=Le();xr(n,r);var e=new M(3);return yr(e,r),Aa(t,n,e),t}function Sa(t,r){return t[0]=r[0],t[1]=r[1],t[2]=r[2],t[3]=r[3],t[4]=r[4],t[5]=r[5],t[6]=r[6],t[7]=r[7],t}function La(t){return t[0]=0,t[1]=0,t[2]=0,t[3]=1,t[4]=0,t[5]=0,t[6]=0,t[7]=0,t}function Ia(t,r,n,e,a,i,o,u,s){return t[0]=r,t[1]=n,t[2]=e,t[3]=a,t[4]=i,t[5]=o,t[6]=u,t[7]=s,t}var wa=ea;function Da(t,r){return t[0]=r[4],t[1]=r[5],t[2]=r[6],t[3]=r[7],t}var Ua=ea;function Ca(t,r){return t[4]=r[0],t[5]=r[1],t[6]=r[2],t[7]=r[3],t}function Fa(t,r){var n=r[4],e=r[5],a=r[6],i=r[7],o=-r[0],u=-r[1],s=-r[2],c=r[3];return t[0]=2*(n*c+i*o+e*s-a*u),t[1]=2*(e*c+i*u+a*o-n*s),t[2]=2*(a*c+i*s+n*u-e*o),t}function Oa(t,r,n){var e=r[0],a=r[1],i=r[2],o=r[3],u=.5*n[0],s=.5*n[1],c=.5*n[2],f=r[4],l=r[5],h=r[6],v=r[7];return t[0]=e,t[1]=a,t[2]=i,t[3]=o,t[4]=o*u+a*c-i*s+f,t[5]=o*s+i*u-e*c+l,t[6]=o*c+e*s-a*u+h,t[7]=-e*u-a*s-i*c+v,t}function qa(t,r,n){var e=-r[0],a=-r[1],i=-r[2],o=r[3],u=r[4],s=r[5],c=r[6],f=r[7],l=u*o+f*e+s*i-c*a,h=s*o+f*a+c*e-u*i,v=c*o+f*i+u*a-s*e,M=f*o-u*e-s*a-c*i;return Fe(t,r,n),e=t[0],a=t[1],i=t[2],o=t[3],t[4]=l*o+M*e+h*i-v*a,t[5]=h*o+M*a+v*e-l*i,t[6]=v*o+M*i+l*a-h*e,t[7]=M*o-l*e-h*a-v*i,t}function Na(t,r,n){var e=-r[0],a=-r[1],i=-r[2],o=r[3],u=r[4],s=r[5],c=r[6],f=r[7],l=u*o+f*e+s*i-c*a,h=s*o+f*a+c*e-u*i,v=c*o+f*i+u*a-s*e,M=f*o-u*e-s*a-c*i;return Oe(t,r,n),e=t[0],a=t[1],i=t[2],o=t[3],t[4]=l*o+M*e+h*i-v*a,t[5]=h*o+M*a+v*e-l*i,t[6]=v*o+M*i+l*a-h*e,t[7]=M*o-l*e-h*a-v*i,t}function Va(t,r,n){var e=-r[0],a=-r[1],i=-r[2],o=r[3],u=r[4],s=r[5],c=r[6],f=r[7],l=u*o+f*e+s*i-c*a,h=s*o+f*a+c*e-u*i,v=c*o+f*i+u*a-s*e,M=f*o-u*e-s*a-c*i;return qe(t,r,n),e=t[0],a=t[1],i=t[2],o=t[3],t[4]=l*o+M*e+h*i-v*a,t[5]=h*o+M*a+v*e-l*i,t[6]=v*o+M*i+l*a-h*e,t[7]=M*o-l*e-h*a-v*i,t}function Ba(t,r,n){var e=n[0],a=n[1],i=n[2],o=n[3],u=r[0],s=r[1],c=r[2],f=r[3];return t[0]=u*o+f*e+s*i-c*a,t[1]=s*o+f*a+c*e-u*i,t[2]=c*o+f*i+u*a-s*e,t[3]=f*o-u*e-s*a-c*i,u=r[4],s=r[5],c=r[6],f=r[7],t[4]=u*o+f*e+s*i-c*a,t[5]=s*o+f*a+c*e-u*i,t[6]=c*o+f*i+u*a-s*e,t[7]=f*o-u*e-s*a-c*i,t}function Ha(t,r,n){var e=r[0],a=r[1],i=r[2],o=r[3],u=n[0],s=n[1],c=n[2],f=n[3];return t[0]=e*f+o*u+a*c-i*s,t[1]=a*f+o*s+i*u-e*c,t[2]=i*f+o*c+e*s-a*u,t[3]=o*f-e*u-a*s-i*c,u=n[4],s=n[5],c=n[6],f=n[7],t[4]=e*f+o*u+a*c-i*s,t[5]=a*f+o*s+i*u-e*c,t[6]=i*f+o*c+e*s-a*u,t[7]=o*f-e*u-a*s-i*c,t}function ja(t,r,n,e){if(Math.abs(e)<v)return Sa(t,r);var a=Math.hypot(n[0],n[1],n[2]);e*=.5;var i=Math.sin(e),o=i*n[0]/a,u=i*n[1]/a,s=i*n[2]/a,c=Math.cos(e),f=r[0],l=r[1],h=r[2],M=r[3];t[0]=f*c+M*o+l*s-h*u,t[1]=l*c+M*u+h*o-f*s,t[2]=h*c+M*s+f*u-l*o,t[3]=M*c-f*o-l*u-h*s;var d=r[4],m=r[5],p=r[6],g=r[7];return t[4]=d*c+g*o+m*s-p*u,t[5]=m*c+g*u+p*o-d*s,t[6]=p*c+g*s+d*u-m*o,t[7]=g*c-d*o-m*u-p*s,t}function ka(t,r,n){return t[0]=r[0]+n[0],t[1]=r[1]+n[1],t[2]=r[2]+n[2],t[3]=r[3]+n[3],t[4]=r[4]+n[4],t[5]=r[5]+n[5],t[6]=r[6]+n[6],t[7]=r[7]+n[7],t}function Xa(t,r,n){var e=r[0],a=r[1],i=r[2],o=r[3],u=n[4],s=n[5],c=n[6],f=n[7],l=r[4],h=r[5],v=r[6],M=r[7],d=n[0],m=n[1],p=n[2],g=n[3];return t[0]=e*g+o*d+a*p-i*m,t[1]=a*g+o*m+i*d-e*p,t[2]=i*g+o*p+e*m-a*d,t[3]=o*g-e*d-a*m-i*p,t[4]=e*f+o*u+a*c-i*s+l*g+M*d+h*p-v*m,t[5]=a*f+o*s+i*u-e*c+h*g+M*m+v*d-l*p,t[6]=i*f+o*c+e*s-a*u+v*g+M*p+l*m-h*d,t[7]=o*f-e*u-a*s-i*c+M*g-l*d-h*m-v*p,t}var Ga=Xa;function Ya(t,r,n){return t[0]=r[0]*n,t[1]=r[1]*n,t[2]=r[2]*n,t[3]=r[3]*n,t[4]=r[4]*n,t[5]=r[5]*n,t[6]=r[6]*n,t[7]=r[7]*n,t}var za=sa;function Ka(t,r,n,e){var a=1-e;return za(r,n)<0&&(e=-e),t[0]=r[0]*a+n[0]*e,t[1]=r[1]*a+n[1]*e,t[2]=r[2]*a+n[2]*e,t[3]=r[3]*a+n[3]*e,t[4]=r[4]*a+n[4]*e,t[5]=r[5]*a+n[5]*e,t[6]=r[6]*a+n[6]*e,t[7]=r[7]*a+n[7]*e,t}function Za(t,r){var n=Ja(r);return t[0]=-r[0]/n,t[1]=-r[1]/n,t[2]=-r[2]/n,t[3]=r[3]/n,t[4]=-r[4]/n,t[5]=-r[5]/n,t[6]=-r[6]/n,t[7]=r[7]/n,t}function Qa(t,r){return t[0]=-r[0],t[1]=-r[1],t[2]=-r[2],t[3]=r[3],t[4]=-r[4],t[5]=-r[5],t[6]=-r[6],t[7]=r[7],t}var Wa=fa,$a=Wa,Ja=ha,ti=Ja;function ri(t,r){var n=Ja(r);if(n>0){n=Math.sqrt(n);var e=r[0]/n,a=r[1]/n,i=r[2]/n,o=r[3]/n,u=r[4],s=r[5],c=r[6],f=r[7],l=e*u+a*s+i*c+o*f;t[0]=e,t[1]=a,t[2]=i,t[3]=o,t[4]=(u-e*l)/n,t[5]=(s-a*l)/n,t[6]=(c-i*l)/n,t[7]=(f-o*l)/n}return t}function ni(t){return"quat2("+t[0]+", "+t[1]+", "+t[2]+", "+t[3]+", "+t[4]+", "+t[5]+", "+t[6]+", "+t[7]+")"}function ei(t,r){return t[0]===r[0]&&t[1]===r[1]&&t[2]===r[2]&&t[3]===r[3]&&t[4]===r[4]&&t[5]===r[5]&&t[6]===r[6]&&t[7]===r[7]}function ai(t,r){var n=t[0],e=t[1],a=t[2],i=t[3],o=t[4],u=t[5],s=t[6],c=t[7],f=r[0],l=r[1],h=r[2],M=r[3],d=r[4],m=r[5],p=r[6],g=r[7];return Math.abs(n-f)<=v*Math.max(1,Math.abs(n),Math.abs(f))&&Math.abs(e-l)<=v*Math.max(1,Math.abs(e),Math.abs(l))&&Math.abs(a-h)<=v*Math.max(1,Math.abs(a),Math.abs(h))&&Math.abs(i-M)<=v*Math.max(1,Math.abs(i),Math.abs(M))&&Math.abs(o-d)<=v*Math.max(1,Math.abs(o),Math.abs(d))&&Math.abs(u-m)<=v*Math.max(1,Math.abs(u),Math.abs(m))&&Math.abs(s-p)<=v*Math.max(1,Math.abs(s),Math.abs(p))&&Math.abs(c-g)<=v*Math.max(1,Math.abs(c),Math.abs(g))}function ii(){var t=new M(2);return M!=Float32Array&&(t[0]=0,t[1]=0),t}function oi(t){var r=new M(2);return r[0]=t[0],r[1]=t[1],r}function ui(t,r){var n=new M(2);return n[0]=t,n[1]=r,n}function si(t,r){return t[0]=r[0],t[1]=r[1],t}function ci(t,r,n){return t[0]=r,t[1]=n,t}function fi(t,r,n){return t[0]=r[0]+n[0],t[1]=r[1]+n[1],t}function li(t,r,n){return t[0]=r[0]-n[0],t[1]=r[1]-n[1],t}function hi(t,r,n){return t[0]=r[0]*n[0],t[1]=r[1]*n[1],t}function vi(t,r,n){return t[0]=r[0]/n[0],t[1]=r[1]/n[1],t}function Mi(t,r){return t[0]=Math.ceil(r[0]),t[1]=Math.ceil(r[1]),t}function di(t,r){return t[0]=Math.floor(r[0]),t[1]=Math.floor(r[1]),t}function mi(t,r,n){return t[0]=Math.min(r[0],n[0]),t[1]=Math.min(r[1],n[1]),t}function pi(t,r,n){return t[0]=Math.max(r[0],n[0]),t[1]=Math.max(r[1],n[1]),t}function gi(t,r){return t[0]=Math.round(r[0]),t[1]=Math.round(r[1]),t}function bi(t,r,n){return t[0]=r[0]*n,t[1]=r[1]*n,t}function yi(t,r,n,e){return t[0]=r[0]+n[0]*e,t[1]=r[1]+n[1]*e,t}function Ei(t,r){var n=r[0]-t[0],e=r[1]-t[1];return Math.hypot(n,e)}function xi(t,r){var n=r[0]-t[0],e=r[1]-t[1];return n*n+e*e}function Ti(t){var r=t[0],n=t[1];return Math.hypot(r,n)}function Ai(t){var r=t[0],n=t[1];return r*r+n*n}function Pi(t,r){return t[0]=-r[0],t[1]=-r[1],t}function Ri(t,r){return t[0]=1/r[0],t[1]=1/r[1],t}function _i(t,r){var n=r[0],e=r[1],a=n*n+e*e;return a>0&&(a=1/Math.sqrt(a)),t[0]=r[0]*a,t[1]=r[1]*a,t}function Si(t,r){return t[0]*r[0]+t[1]*r[1]}function Li(t,r,n){var e=r[0]*n[1]-r[1]*n[0];return t[0]=t[1]=0,t[2]=e,t}function Ii(t,r,n,e){var a=r[0],i=r[1];return t[0]=a+e*(n[0]-a),t[1]=i+e*(n[1]-i),t}function wi(t,r){r=r||1;var n=2*d()*Math.PI;return t[0]=Math.cos(n)*r,t[1]=Math.sin(n)*r,t}function Di(t,r,n){var e=r[0],a=r[1];return t[0]=n[0]*e+n[2]*a,t[1]=n[1]*e+n[3]*a,t}function Ui(t,r,n){var e=r[0],a=r[1];return t[0]=n[0]*e+n[2]*a+n[4],t[1]=n[1]*e+n[3]*a+n[5],t}function Ci(t,r,n){var e=r[0],a=r[1];return t[0]=n[0]*e+n[3]*a+n[6],t[1]=n[1]*e+n[4]*a+n[7],t}function Fi(t,r,n){var e=r[0],a=r[1];return t[0]=n[0]*e+n[4]*a+n[12],t[1]=n[1]*e+n[5]*a+n[13],t}function Oi(t,r,n,e){var a=r[0]-n[0],i=r[1]-n[1],o=Math.sin(e),u=Math.cos(e);return t[0]=a*u-i*o+n[0],t[1]=a*o+i*u+n[1],t}function qi(t,r){var n=t[0],e=t[1],a=r[0],i=r[1],o=Math.sqrt(n*n+e*e)*Math.sqrt(a*a+i*i),u=o&&(n*a+e*i)/o;return Math.acos(Math.min(Math.max(u,-1),1))}function Ni(t){return t[0]=0,t[1]=0,t}function Vi(t){return"vec2("+t[0]+", "+t[1]+")"}function Bi(t,r){return t[0]===r[0]&&t[1]===r[1]}function Hi(t,r){var n=t[0],e=t[1],a=r[0],i=r[1];return Math.abs(n-a)<=v*Math.max(1,Math.abs(n),Math.abs(a))&&Math.abs(e-i)<=v*Math.max(1,Math.abs(e),Math.abs(i))}var ji=Ti,ki=li,Xi=hi,Gi=vi,Yi=Ei,zi=xi,Ki=Ai,Zi=function(){var t=ii();return function(r,n,e,a,i,o){var u,s;for(n||(n=2),e||(e=0),s=a?Math.min(a*n+e,r.length):r.length,u=e;u<s;u+=n)t[0]=r[u],t[1]=r[u+1],i(t,t,o),r[u]=t[0],r[u+1]=t[1];return r}}()},182:(t,r,n)=>{r.v4=void 0;var e=n(196);var a=n(465);var i=n(797);var o=n(11);var u=n(425);var s=n(568);var c=n(591);var f=n(286);Object.defineProperty(r,"v4",{enumerable:!0,get:function(){return f.default}});var l=n(557);var h=n(356);var v=n(268);var M=n(299);var d=n(746);var m=n(770)},196:(t,r)=>{Object.defineProperty(r,"__esModule",{value:!0}),r.default="ffffffff-ffff-ffff-ffff-ffffffffffff"},338:(t,r)=>{function n(t){return 14+(t+64>>>9<<4)+1}function e(t,r){const n=(65535&t)+(65535&r);return(t>>16)+(r>>16)+(n>>16)<<16|65535&n}function a(t,r,n,a,i,o){return e((u=e(e(r,t),e(a,o)))<<(s=i)|u>>>32-s,n);var u,s}function i(t,r,n,e,i,o,u){return a(r&n|~r&e,t,r,i,o,u)}function o(t,r,n,e,i,o,u){return a(r&e|n&~e,t,r,i,o,u)}function u(t,r,n,e,i,o,u){return a(r^n^e,t,r,i,o,u)}function s(t,r,n,e,i,o,u){return a(n^(r|~e),t,r,i,o,u)}Object.defineProperty(r,"__esModule",{value:!0}),r.default=function(t){return function(t){const r=new Uint8Array(4*t.length);for(let n=0;n<4*t.length;n++)r[n]=t[n>>2]>>>n%4*8&255;return r}(function(t,r){const a=new Uint32Array(n(r)).fill(0);a.set(t),a[r>>5]|=128<<r%32,a[a.length-1]=r,t=a;let c=1732584193,f=-271733879,l=-1732584194,h=271733878;for(let r=0;r<t.length;r+=16){const n=c,a=f,v=l,M=h;c=i(c,f,l,h,t[r],7,-680876936),h=i(h,c,f,l,t[r+1],12,-389564586),l=i(l,h,c,f,t[r+2],17,606105819),f=i(f,l,h,c,t[r+3],22,-1044525330),c=i(c,f,l,h,t[r+4],7,-176418897),h=i(h,c,f,l,t[r+5],12,1200080426),l=i(l,h,c,f,t[r+6],17,-1473231341),f=i(f,l,h,c,t[r+7],22,-45705983),c=i(c,f,l,h,t[r+8],7,1770035416),h=i(h,c,f,l,t[r+9],12,-1958414417),l=i(l,h,c,f,t[r+10],17,-42063),f=i(f,l,h,c,t[r+11],22,-1990404162),c=i(c,f,l,h,t[r+12],7,1804603682),h=i(h,c,f,l,t[r+13],12,-40341101),l=i(l,h,c,f,t[r+14],17,-1502002290),f=i(f,l,h,c,t[r+15],22,1236535329),c=o(c,f,l,h,t[r+1],5,-165796510),h=o(h,c,f,l,t[r+6],9,-1069501632),l=o(l,h,c,f,t[r+11],14,643717713),f=o(f,l,h,c,t[r],20,-373897302),c=o(c,f,l,h,t[r+5],5,-701558691),h=o(h,c,f,l,t[r+10],9,38016083),l=o(l,h,c,f,t[r+15],14,-660478335),f=o(f,l,h,c,t[r+4],20,-405537848),c=o(c,f,l,h,t[r+9],5,568446438),h=o(h,c,f,l,t[r+14],9,-1019803690),l=o(l,h,c,f,t[r+3],14,-187363961),f=o(f,l,h,c,t[r+8],20,1163531501),c=o(c,f,l,h,t[r+13],5,-1444681467),h=o(h,c,f,l,t[r+2],9,-51403784),l=o(l,h,c,f,t[r+7],14,1735328473),f=o(f,l,h,c,t[r+12],20,-1926607734),c=u(c,f,l,h,t[r+5],4,-378558),h=u(h,c,f,l,t[r+8],11,-2022574463),l=u(l,h,c,f,t[r+11],16,1839030562),f=u(f,l,h,c,t[r+14],23,-35309556),c=u(c,f,l,h,t[r+1],4,-1530992060),h=u(h,c,f,l,t[r+4],11,1272893353),l=u(l,h,c,f,t[r+7],16,-155497632),f=u(f,l,h,c,t[r+10],23,-1094730640),c=u(c,f,l,h,t[r+13],4,681279174),h=u(h,c,f,l,t[r],11,-358537222),l=u(l,h,c,f,t[r+3],16,-722521979),f=u(f,l,h,c,t[r+6],23,76029189),c=u(c,f,l,h,t[r+9],4,-640364487),h=u(h,c,f,l,t[r+12],11,-421815835),l=u(l,h,c,f,t[r+15],16,530742520),f=u(f,l,h,c,t[r+2],23,-995338651),c=s(c,f,l,h,t[r],6,-198630844),h=s(h,c,f,l,t[r+7],10,1126891415),l=s(l,h,c,f,t[r+14],15,-1416354905),f=s(f,l,h,c,t[r+5],21,-57434055),c=s(c,f,l,h,t[r+12],6,1700485571),h=s(h,c,f,l,t[r+3],10,-1894986606),l=s(l,h,c,f,t[r+10],15,-1051523),f=s(f,l,h,c,t[r+1],21,-2054922799),c=s(c,f,l,h,t[r+8],6,1873313359),h=s(h,c,f,l,t[r+15],10,-30611744),l=s(l,h,c,f,t[r+6],15,-1560198380),f=s(f,l,h,c,t[r+13],21,1309151649),c=s(c,f,l,h,t[r+4],6,-145523070),h=s(h,c,f,l,t[r+11],10,-1120210379),l=s(l,h,c,f,t[r+2],15,718787259),f=s(f,l,h,c,t[r+9],21,-343485551),c=e(c,n),f=e(f,a),l=e(l,v),h=e(h,M)}return Uint32Array.of(c,f,l,h)}(function(t){if(0===t.length)return new Uint32Array;const r=new Uint32Array(n(8*t.length)).fill(0);for(let n=0;n<t.length;n++)r[n>>2]|=(255&t[n])<<n%4*8;return r}(t),8*t.length))}},779:(t,r)=>{Object.defineProperty(r,"__esModule",{value:!0});const n="undefined"!=typeof crypto&&crypto.randomUUID&&crypto.randomUUID.bind(crypto);r.default={randomUUID:n}},465:(t,r)=>{Object.defineProperty(r,"__esModule",{value:!0}),r.default="00000000-0000-0000-0000-000000000000"},797:(t,r,n)=>{Object.defineProperty(r,"__esModule",{value:!0});const e=n(746);r.default=function(t){if(!(0,e.default)(t))throw TypeError("Invalid UUID");let r;return Uint8Array.of((r=parseInt(t.slice(0,8),16))>>>24,r>>>16&255,r>>>8&255,255&r,(r=parseInt(t.slice(9,13),16))>>>8,255&r,(r=parseInt(t.slice(14,18),16))>>>8,255&r,(r=parseInt(t.slice(19,23),16))>>>8,255&r,(r=parseInt(t.slice(24,36),16))/1099511627776&255,r/4294967296&255,r>>>24&255,r>>>16&255,r>>>8&255,255&r)}},697:(t,r)=>{Object.defineProperty(r,"__esModule",{value:!0}),r.default=/^(?:[0-9a-f]{8}-[0-9a-f]{4}-[1-8][0-9a-f]{3}-[89ab][0-9a-f]{3}-[0-9a-f]{12}|00000000-0000-0000-0000-000000000000|ffffffff-ffff-ffff-ffff-ffffffffffff)$/i},291:(t,r)=>{let n;Object.defineProperty(r,"__esModule",{value:!0}),r.default=function(){if(!n){if("undefined"==typeof crypto||!crypto.getRandomValues)throw new Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");n=crypto.getRandomValues.bind(crypto)}return n(e)};const e=new Uint8Array(16)},829:(t,r)=>{function n(t,r,n,e){switch(t){case 0:return r&n^~r&e;case 1:case 3:return r^n^e;case 2:return r&n^r&e^n&e}}function e(t,r){return t<<r|t>>>32-r}Object.defineProperty(r,"__esModule",{value:!0}),r.default=function(t){const r=[1518500249,1859775393,2400959708,3395469782],a=[1732584193,4023233417,2562383102,271733878,3285377520],i=new Uint8Array(t.length+1);i.set(t),i[t.length]=128;const o=(t=i).length/4+2,u=Math.ceil(o/16),s=new Array(u);for(let r=0;r<u;++r){const n=new Uint32Array(16);for(let e=0;e<16;++e)n[e]=t[64*r+4*e]<<24|t[64*r+4*e+1]<<16|t[64*r+4*e+2]<<8|t[64*r+4*e+3];s[r]=n}s[u-1][14]=8*(t.length-1)/Math.pow(2,32),s[u-1][14]=Math.floor(s[u-1][14]),s[u-1][15]=8*(t.length-1)&4294967295;for(let t=0;t<u;++t){const i=new Uint32Array(80);for(let r=0;r<16;++r)i[r]=s[t][r];for(let t=16;t<80;++t)i[t]=e(i[t-3]^i[t-8]^i[t-14]^i[t-16],1);let o=a[0],u=a[1],c=a[2],f=a[3],l=a[4];for(let t=0;t<80;++t){const a=Math.floor(t/20),s=e(o,5)+n(a,u,c,f)+l+r[a]+i[t]>>>0;l=f,f=c,c=e(u,30)>>>0,u=o,o=s}a[0]=a[0]+o>>>0,a[1]=a[1]+u>>>0,a[2]=a[2]+c>>>0,a[3]=a[3]+f>>>0,a[4]=a[4]+l>>>0}return Uint8Array.of(a[0]>>24,a[0]>>16,a[0]>>8,a[0],a[1]>>24,a[1]>>16,a[1]>>8,a[1],a[2]>>24,a[2]>>16,a[2]>>8,a[2],a[3]>>24,a[3]>>16,a[3]>>8,a[3],a[4]>>24,a[4]>>16,a[4]>>8,a[4])}},11:(t,r,n)=>{Object.defineProperty(r,"__esModule",{value:!0}),r.unsafeStringify=i;const e=n(746),a=[];for(let t=0;t<256;++t)a.push((t+256).toString(16).slice(1));function i(t,r=0){return(a[t[r+0]]+a[t[r+1]]+a[t[r+2]]+a[t[r+3]]+"-"+a[t[r+4]]+a[t[r+5]]+"-"+a[t[r+6]]+a[t[r+7]]+"-"+a[t[r+8]]+a[t[r+9]]+"-"+a[t[r+10]]+a[t[r+11]]+a[t[r+12]]+a[t[r+13]]+a[t[r+14]]+a[t[r+15]]).toLowerCase()}r.default=function(t,r=0){const n=i(t,r);if(!(0,e.default)(n))throw TypeError("Stringified UUID is invalid");return n}},425:(t,r,n)=>{Object.defineProperty(r,"__esModule",{value:!0}),r.updateV1State=o;const e=n(291),a=n(11),i={};function o(t,r,n){return t.msecs??=-1/0,t.nsecs??=0,r===t.msecs?(t.nsecs++,t.nsecs>=1e4&&(t.node=void 0,t.nsecs=0)):r>t.msecs?t.nsecs=0:r<t.msecs&&(t.node=void 0),t.node||(t.node=n.slice(10,16),t.node[0]|=1,t.clockseq=16383&(n[8]<<8|n[9])),t.msecs=r,t}function u(t,r,n,e,a,i,o=0){i||(i=new Uint8Array(16),o=0),r??=Date.now(),n??=0,e??=16383&(t[8]<<8|t[9]),a??=t.slice(10,16);const u=(1e4*(268435455&(r+=122192928e5))+n)%4294967296;i[o++]=u>>>24&255,i[o++]=u>>>16&255,i[o++]=u>>>8&255,i[o++]=255&u;const s=r/4294967296*1e4&268435455;i[o++]=s>>>8&255,i[o++]=255&s,i[o++]=s>>>24&15|16,i[o++]=s>>>16&255,i[o++]=e>>>8|128,i[o++]=255&e;for(let t=0;t<6;++t)i[o++]=a[t];return i}r.default=function(t,r,n){let s;const c=t?._v6??!1;if(t){const r=Object.keys(t);1===r.length&&"_v6"===r[0]&&(t=void 0)}if(t)s=u(t.random??t.rng?.()??(0,e.default)(),t.msecs,t.nsecs,t.clockseq,t.node,r,n);else{const t=Date.now(),a=(0,e.default)();o(i,t,a),s=u(a,i.msecs,i.nsecs,c?void 0:i.clockseq,c?void 0:i.node,r,n)}return r?s:(0,a.unsafeStringify)(s)}},568:(t,r,n)=>{Object.defineProperty(r,"__esModule",{value:!0}),r.default=function(t){const r=function(t){return Uint8Array.of((15&t[6])<<4|t[7]>>4&15,(15&t[7])<<4|(240&t[4])>>4,(15&t[4])<<4|(240&t[5])>>4,(15&t[5])<<4|(240&t[0])>>4,(15&t[0])<<4|(240&t[1])>>4,(15&t[1])<<4|(240&t[2])>>4,96|15&t[2],t[3],t[8],t[9],t[10],t[11],t[12],t[13],t[14],t[15])}("string"==typeof t?(0,e.default)(t):t);return"string"==typeof t?(0,a.unsafeStringify)(r):r};const e=n(797),a=n(11)},591:(t,r,n)=>{Object.defineProperty(r,"__esModule",{value:!0}),r.URL=r.DNS=void 0;const e=n(338),a=n(988);var i=n(988);function o(t,r,n,i){return(0,a.default)(48,e.default,t,r,n,i)}Object.defineProperty(r,"DNS",{enumerable:!0,get:function(){return i.DNS}}),Object.defineProperty(r,"URL",{enumerable:!0,get:function(){return i.URL}}),o.DNS=a.DNS,o.URL=a.URL,r.default=o},988:(t,r,n)=>{Object.defineProperty(r,"__esModule",{value:!0}),r.URL=r.DNS=void 0,r.stringToBytes=i,r.default=function(t,r,n,o,u,s){const c="string"==typeof n?i(n):n,f="string"==typeof o?(0,e.default)(o):o;"string"==typeof o&&(o=(0,e.default)(o));if(16!==o?.length)throw TypeError("Namespace must be array-like (16 iterable integer values, 0-255)");let l=new Uint8Array(16+c.length);if(l.set(f),l.set(c,f.length),l=r(l),l[6]=15&l[6]|t,l[8]=63&l[8]|128,u){s=s||0;for(let t=0;t<16;++t)u[s+t]=l[t];return u}return(0,a.unsafeStringify)(l)};const e=n(797),a=n(11);function i(t){t=unescape(encodeURIComponent(t));const r=new Uint8Array(t.length);for(let n=0;n<t.length;++n)r[n]=t.charCodeAt(n);return r}r.DNS="6ba7b810-9dad-11d1-80b4-00c04fd430c8",r.URL="6ba7b811-9dad-11d1-80b4-00c04fd430c8"},286:(t,r,n)=>{Object.defineProperty(r,"__esModule",{value:!0});const e=n(779),a=n(291),i=n(11);r.default=function(t,r,n){if(e.default.randomUUID&&!r&&!t)return e.default.randomUUID();const o=(t=t||{}).random||(t.rng||a.default)();if(o[6]=15&o[6]|64,o[8]=63&o[8]|128,r){n=n||0;for(let t=0;t<16;++t)r[n+t]=o[t];return r}return(0,i.unsafeStringify)(o)}},557:(t,r,n)=>{Object.defineProperty(r,"__esModule",{value:!0}),r.URL=r.DNS=void 0;const e=n(829),a=n(988);var i=n(988);function o(t,r,n,i){return(0,a.default)(80,e.default,t,r,n,i)}Object.defineProperty(r,"DNS",{enumerable:!0,get:function(){return i.DNS}}),Object.defineProperty(r,"URL",{enumerable:!0,get:function(){return i.URL}}),o.DNS=a.DNS,o.URL=a.URL,r.default=o},356:(t,r,n)=>{Object.defineProperty(r,"__esModule",{value:!0});const e=n(11),a=n(425),i=n(568);r.default=function(t,r,n){t??={},n??=0;let o=(0,a.default)({...t,_v6:!0},new Uint8Array(16));if(o=(0,i.default)(o),r){for(let t=0;t<16;t++)r[n+t]=o[t];return r}return(0,e.unsafeStringify)(o)}},268:(t,r,n)=>{Object.defineProperty(r,"__esModule",{value:!0}),r.default=function(t){const r=function(t){return Uint8Array.of((15&t[3])<<4|t[4]>>4&15,(15&t[4])<<4|(240&t[5])>>4,(15&t[5])<<4|15&t[6],t[7],(15&t[1])<<4|(240&t[2])>>4,(15&t[2])<<4|(240&t[3])>>4,16|(240&t[0])>>4,(15&t[0])<<4|(240&t[1])>>4,t[8],t[9],t[10],t[11],t[12],t[13],t[14],t[15])}("string"==typeof t?(0,e.default)(t):t);return"string"==typeof t?(0,a.unsafeStringify)(r):r};const e=n(797),a=n(11)},299:(t,r,n)=>{Object.defineProperty(r,"__esModule",{value:!0}),r.updateV7State=o;const e=n(291),a=n(11),i={};function o(t,r,n){return t.msecs??=-1/0,t.seq??=0,r>t.msecs?(t.seq=n[6]<<23|n[7]<<16|n[8]<<8|n[9],t.msecs=r):(t.seq=t.seq+1|0,0===t.seq&&t.msecs++),t}function u(t,r,n,e,a=0){return e||(e=new Uint8Array(16),a=0),r??=Date.now(),n??=127*t[6]<<24|t[7]<<16|t[8]<<8|t[9],e[a++]=r/1099511627776&255,e[a++]=r/4294967296&255,e[a++]=r/16777216&255,e[a++]=r/65536&255,e[a++]=r/256&255,e[a++]=255&r,e[a++]=112|n>>>28&15,e[a++]=n>>>20&255,e[a++]=128|n>>>14&63,e[a++]=n>>>6&255,e[a++]=n<<2&255|3&t[10],e[a++]=t[11],e[a++]=t[12],e[a++]=t[13],e[a++]=t[14],e[a++]=t[15],e}r.default=function(t,r,n){let s;if(t)s=u(t.random??t.rng?.()??(0,e.default)(),t.msecs,t.seq,r,n);else{const t=Date.now(),a=(0,e.default)();o(i,t,a),s=u(a,i.msecs,i.seq,r,n)}return r?s:(0,a.unsafeStringify)(s)}},746:(t,r,n)=>{Object.defineProperty(r,"__esModule",{value:!0});const e=n(697);r.default=function(t){return"string"==typeof t&&e.default.test(t)}},770:(t,r,n)=>{Object.defineProperty(r,"__esModule",{value:!0});const e=n(746);r.default=function(t){if(!(0,e.default)(t))throw TypeError("Invalid UUID");return parseInt(t.slice(14,15),16)}}},r={};function n(e){var a=r[e];if(void 0!==a)return a.exports;var i=r[e]={exports:{}};return t[e](i,i.exports,n),i.exports}n.d=(t,r)=>{for(var e in r)n.o(r,e)&&!n.o(t,e)&&Object.defineProperty(t,e,{enumerable:!0,get:r[e]})},n.o=(t,r)=>Object.prototype.hasOwnProperty.call(t,r),n.r=t=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})};function e(t){return t*Math.PI/180}var a,i=function(){return i=Object.assign||function(t){for(var r,n=1,e=arguments.length;n<e;n++)for(var a in r=arguments[n])Object.prototype.hasOwnProperty.call(r,a)&&(t[a]=r[a]);return t},i.apply(this,arguments)},o=function(t,r,n){if(n||2===arguments.length)for(var e,a=0,i=r.length;a<i;a++)!e&&a in r||(e||(e=Array.prototype.slice.call(r,0,a)),e[a]=r[a]);return t.concat(e||Array.prototype.slice.call(r))},u=n(182).v4;!function(t){t.ARRAY_BUFFER="ARRAY_BUFFER",t.MAT1="MAT1",t.MAT2="MAT2",t.MAT3="MAT3",t.MAT4="MAT4",t.VEC1="VEC1",t.VEC2="VEC2",t.VEC3="VEC3",t.VEC4="VEC4",t.I1="I1",t.I2="I2",t.I3="I3",t.I4="I4",t.FLOAT="FLOAT"}(a||(a={}));var s=function(){function t(t,r){this.pickingVS="#version 300 es\n    in vec4 aPosition;\n\n    uniform mat4 uModelMatrix;\n    uniform mat4 uProjectionMatrix;\n    uniform mat4 uViewMatrix;\n\n    void main() {\n      gl_Position = uProjectionMatrix * uViewMatrix * uModelMatrix * aPosition;\n    }\n",this.pickingFS="#version 300 es\n    precision highp float;\n\n    uniform vec3 u_id;\n\n    out vec4 outColor;\n    void main() {\n      outColor = vec4(u_id,1.0);\n    }\n",this.lightPoisitionHandler={handle:{value:"#ifdef USE_LIGHT_POINT\n      vec3 ambient = vec3(0.0);\n      vec3 diffuse = vec3(0.0);\n      vec3 specular = vec3(0.0);\n    for (int i = 0; i < 20; i++) {\n        if (i >= int(uCountPositon)) break;\n        vec3 lightDirection = normalize(uLightPosition[i] - vPosition);\n\n        // Ambient lighting\n        ambient += uAmbientColor * uPositionLightColor[i] * vColor;\n\n        // Diffuse lighting (Lambertian)\n        float diff = max(dot(lightDirection, normal), 0.0);\n        diffuse += diff * uDiffuseColor * uPositionLightColor[i] * vColor;\n\n        // Specular lighting (Phong reflection)\n        vec3 reflectDir = reflect(-lightDirection, normal);\n        float spec = pow(max(dot(viewDirection, reflectDir), 0.0), uShininess);\n        specular += uSpecularColor * spec * uPositionLightColor[i];\n    }\n    color += ambient + diffuse + specular;\n    #endif",var:"@LIGHT_POSITION_HANDLE"},declare:{value:"#ifdef USE_LIGHT_POINT\n  uniform float uCountPositon;\n  uniform vec3 uLightPosition[20];\n  uniform vec3 uPositionLightColor[20];\n\n  uniform vec3 uAmbientColor;\n  uniform vec3 uDiffuseColor;\n  uniform vec3 uSpecularColor;\n  uniform float uShininess;\n  #endif",var:"@LIGHT_POSITION_DECLARE"}},this.lightVectorHandler={handle:{value:"  #ifdef USE_LIGHT_VECTOR\n      vec3 vector = vec3(0.0);\n      for (int i = 0; i < 20; i++) {\n          if (i >= int(uCountVector)) break; \n          vec3 lightDir = normalize(uLightVectors[i]); \n          float diff = max(dot(normal, lightDir), 0.0); \n          vector += diff * uLightVectorColors[i] * vColor;  \n      }\n      color += vector;\n      #endif",var:"@LIGHT_VECTOR_HANDLE"},declare:{value:" #ifdef USE_LIGHT_VECTOR\n                uniform float uCountVector;\n                uniform vec3 uLightVectors[20];\n                uniform vec3 uLightVectorColors[20];\n                #endif",var:"@LIGHT_VECTOR_DECLARE"}},this.textureHandler={declare:{value:" #ifdef USE_TEXTURE\n  varying vec3 vTexcoord;\n  uniform sampler2D uTexture;\n  uniform bool uHasTexture;\n  #endif",var:"@TEXTURE_DECLARE"},handle:{value:"#if defined(USE_TEXTURE)\n      vec4 texColor = texture2D(uTexture, vTexcoord.xy);\n      vColor = texColor.rgb; \n      #endif",var:"@TEXTURE_HANDLE"}},this.pickingHandler={declare:{value:"#ifdef USE_PICKING\n  uniform float rateActive;\n  #endif",var:"@PICKING_DECLARE"},handle:{value:"#ifdef USE_PICKING\n      color *= rateActive;\n      #endif",var:"@PICKING_HANDLE"}},this.vertexShaderSource="\n  attribute vec4 aPosition;\n  attribute vec3 aNormal;\n  attribute vec3 aColor;\n\n  uniform mat4 uModelMatrix;\n  uniform mat4 uProjectionMatrix;\n  uniform mat4 uViewMatrix;\n  uniform mat4 uNormalMatrix;\n\n  varying vec3 vColorI;\n  varying vec3 vNormal;\n  varying vec3 vPosition;\n\n  #ifdef USE_TEXTURE\n  attribute vec2 aTexcoord;\n  uniform mat3 uTextureMatrix;\n  varying vec3 vTexcoord;\n  #endif\n\n  void main() {\n    vPosition = vec3(uViewMatrix * uModelMatrix * aPosition);\n    vNormal = mat3(uViewMatrix * uNormalMatrix) * aNormal;\n    vColorI = aColor;\n    gl_Position = uProjectionMatrix * uViewMatrix * uModelMatrix * aPosition;\n\n    #ifdef USE_TEXTURE\n    vTexcoord = uTextureMatrix * vec3(aTexcoord, 1.0);\n    #endif\n  }\n",this.fragmentShaderSource="\n  precision mediump float;\n  \n  varying vec3 vNormal;\n  varying vec3 vPosition;\n  varying vec3 vColorI;\n\n  @LIGHT_POSITION_DECLARE\n  @LIGHT_VECTOR_DECLARE\n  @TEXTURE_DECLARE\n  @PICKING_DECLARE\n\n  void main() {\n      vec3 vColor = vColorI;\n      @TEXTURE_HANDLE\n\n      vec3 normal = normalize(vNormal);\n      vec3 viewDirection = normalize(-vPosition);\n      vec3 color = vec3(0.0);\n\n      @LIGHT_POSITION_HANDLE\n      @LIGHT_VECTOR_HANDLE\n \n      #ifndef USE_LIGHT_VECTOR\n      #ifndef USE_LIGHT_POINT\n      color += vColor;\n      #endif\n      #endif\n      \n      @PICKING_HANDLE\n\n      gl_FragColor = vec4(color, 1.0);\n  }\n",this.frameBuffer=null,this.ambientColor=[.2,.2,.2],this.diffuseColor=[.5,.5,.5],this.specularColor=[1,1,1],this.canvas=t,this.gl=t.getContext("webgl2"),this.options=r;var n=this.fragmentShaderSource.slice(),e=this.vertexShaderSource.slice();r.useVectorColor&&(e="#define USE_LIGHT_VECTOR\n"+e,n=(n=(n="#define USE_LIGHT_VECTOR\n"+n).replace(this.lightVectorHandler.declare.var,this.lightVectorHandler.declare.value)).replace(this.lightVectorHandler.handle.var,this.lightVectorHandler.handle.value)),r.usePointColor&&(e="#define USE_LIGHT_POINT\n"+e,n=(n=(n="#define USE_LIGHT_POINT\n"+n).replace(this.lightPoisitionHandler.declare.var,this.lightPoisitionHandler.declare.value)).replace(this.lightPoisitionHandler.handle.var,this.lightPoisitionHandler.handle.value)),r.useTexture&&(e="#define USE_TEXTURE\n"+e,n=(n=(n="#define USE_TEXTURE\n"+n).replace(this.textureHandler.declare.var,this.textureHandler.declare.value)).replace(this.textureHandler.handle.var,this.textureHandler.handle.value)),r.usePicking&&(e="#define USE_PICKING\n"+e,n=(n=(n="#define USE_PICKING\n"+n).replace(this.pickingHandler.declare.var,this.pickingHandler.declare.value)).replace(this.pickingHandler.handle.var,this.pickingHandler.handle.value)),[this.pickingHandler.declare.var,this.pickingHandler.handle.var,this.lightVectorHandler.declare.var,this.lightVectorHandler.handle.var,this.lightPoisitionHandler.declare.var,this.lightPoisitionHandler.handle.var,this.textureHandler.declare.var,this.textureHandler.handle.var].forEach((function(t){n=n.replace(t,"")}));var a=this.createShader(this.gl,this.gl.VERTEX_SHADER,e),i=this.createShader(this.gl,this.gl.FRAGMENT_SHADER,n),o=this.createShader(this.gl,this.gl.VERTEX_SHADER,this.pickingVS),u=this.createShader(this.gl,this.gl.FRAGMENT_SHADER,this.pickingFS);this.program=this.createProgram(this.gl,a,i),this.pickingProgram=this.createProgram(this.gl,o,u),this.lightSoucres=[],this.shininess=0}return t.prototype.drawPicking=function(t,r){var n=this.gl;n.useProgram(this.pickingProgram),this.fillData(this.pickingProgram,a.ARRAY_BUFFER,"aPosition",t.position),this.fillData(this.pickingProgram,a.MAT4,"uModelMatrix",t.modelMatrix),this.fillData(this.pickingProgram,a.MAT4,"uProjectionMatrix",t.projectMatrix),this.fillData(this.pickingProgram,a.MAT4,"uViewMatrix",t.viewMatrix),this.fillData(this.pickingProgram,a.VEC3,"u_id",this.indexToRGB(r+1)),n.drawArrays(n.TRIANGLES,0,t.position.length/3)},t.prototype.setLightSoucres=function(t){this.lightSoucres=t},t.prototype.addLightSoucre=function(t){this.lightSoucres.push(t)},t.prototype.draw=function(t,r,n){var e=this,a=this.gl;if(a.viewport(0,0,this.canvas.width,this.canvas.height),this.options.usePicking){if(a.useProgram(this.pickingProgram),r){var i=a.createFramebuffer();a.bindFramebuffer(a.FRAMEBUFFER,i);var o=a.createRenderbuffer();a.bindRenderbuffer(a.RENDERBUFFER,o),a.renderbufferStorage(a.RENDERBUFFER,a.RGBA8,this.canvas.width,this.canvas.height),a.framebufferRenderbuffer(a.FRAMEBUFFER,a.COLOR_ATTACHMENT0,a.RENDERBUFFER,o),this.frameBuffer=i}else a.bindFramebuffer(a.FRAMEBUFFER,this.frameBuffer);t.forEach((function(t,r){e.drawPicking(t,r)})),a.bindFramebuffer(a.FRAMEBUFFER,null)}a.useProgram(this.program),a.clearColor(0,0,0,1),a.enable(a.DEPTH_TEST),a.clear(a.COLOR_BUFFER_BIT|a.DEPTH_BUFFER_BIT);for(var u=0;u<t.length;u++){var s=t[u];s.texture.image&&this.options.useTexture?this.loadTexture(s.texture.image,u,s,u===n):this.drawScene(s,u===n,u)}},t.prototype.loadTexture=function(t,r,n,e){var a=this.gl,i=a.createTexture();a.enable(a.DEPTH_TEST),a.clear(a.COLOR_BUFFER_BIT|a.DEPTH_BUFFER_BIT),a.activeTexture(a.TEXTURE0+r),a.bindTexture(a.TEXTURE_2D,i),a.texParameteri(a.TEXTURE_2D,a.TEXTURE_WRAP_S,a.CLAMP_TO_EDGE),a.texParameteri(a.TEXTURE_2D,a.TEXTURE_WRAP_T,a.CLAMP_TO_EDGE),a.texParameteri(a.TEXTURE_2D,a.TEXTURE_MIN_FILTER,a.LINEAR),a.texParameteri(a.TEXTURE_2D,a.TEXTURE_MAG_FILTER,a.LINEAR),a.texImage2D(a.TEXTURE_2D,0,a.RGBA,a.RGBA,a.UNSIGNED_BYTE,t),this.drawScene(n,e,r)},t.prototype.drawScene=function(t,r,n){var e=this.gl;if(e.useProgram(this.program),this.options.usePicking){var i=r?t.rateActive:1;this.fillData(this.program,a.FLOAT,"rateActive",i)}if(this.options.useTexture&&(this.fillData(this.program,a.FLOAT,"uHasTexture",!!t.texture.image),this.fillData(this.program,a.MAT3,"uTextureMatrix",t.texture.matrix),t.texture.image&&this.fillData(this.program,a.I1,"uTexture",e.TEXTURE0+n),this.fillData(this.program,a.ARRAY_BUFFER,"aTexcoord",t.texture.textcoord,!0,2)),this.options.usePointColor){this.fillData(this.program,a.VEC3,"uAmbientColor",this.ambientColor),this.fillData(this.program,a.VEC3,"uDiffuseColor",this.diffuseColor),this.fillData(this.program,a.VEC3,"uSpecularColor",this.specularColor),this.fillData(this.program,a.FLOAT,"uShininess",this.shininess);var o=this.lightSoucres.filter((function(t){return t.isLightPosition})).map((function(t){return t.value})),u=this.lightSoucres.filter((function(t){return t.isLightPosition})).map((function(t){return t.color}));this.fillData(this.program,a.FLOAT,"uCountPositon",o.length),this.fillData(this.program,a.VEC3,"uLightPosition",new Float32Array(o.flat())),this.fillData(this.program,a.VEC3,"uPositionLightColor",new Float32Array(u.flat()))}if(this.options.useVectorColor){var s=this.lightSoucres.filter((function(t){return!t.isLightPosition})).map((function(t){return t.value})),c=this.lightSoucres.filter((function(t){return!t.isLightPosition})).map((function(t){return t.color}));this.fillData(this.program,a.FLOAT,"uCountVector",s.length),this.fillData(this.program,a.VEC3,"uLightVectors",new Float32Array(s.flat())),this.fillData(this.program,a.VEC3,"uLightVectorColors",new Float32Array(c.flat()))}this.fillData(this.program,a.ARRAY_BUFFER,"aPosition",t.position),this.fillData(this.program,a.ARRAY_BUFFER,"aColor",t.color),this.fillData(this.program,a.ARRAY_BUFFER,"aNormal",t.normal),this.fillData(this.program,a.MAT4,"uModelMatrix",t.modelMatrix),this.fillData(this.program,a.MAT4,"uProjectionMatrix",t.projectMatrix),this.fillData(this.program,a.MAT4,"uViewMatrix",t.viewMatrix),this.fillData(this.program,a.MAT4,"uNormalMatrix",t.normalMatrix),e.drawArrays(e.TRIANGLES,0,t.position.length/3),e.bindTexture(e.TEXTURE_2D,null)},t.prototype.fillData=function(t,r,n,e,i,o,u,s,c){void 0===i&&(i=!1),void 0===o&&(o=3);var f=c||this.gl,l=f.getUniformLocation(t,n);switch(r){case a.MAT4:f.uniformMatrix4fv(l,i,e);break;case a.MAT3:f.uniformMatrix3fv(l,i,e);break;case a.VEC4:f.uniform4fv(l,e);break;case a.VEC3:f.uniform3fv(l,e);break;case a.FLOAT:f.uniform1f(l,e);break;case a.ARRAY_BUFFER:this.fillArrayBuffer(t,n,e,o,u,s,c);break;case a.I1:f.uniform1i(l,e)}},t.prototype.hover=function(t){if(this.options.usePicking){var r=this.gl,n=new Uint8Array(4);return r.useProgram(this.pickingProgram),r.bindFramebuffer(r.FRAMEBUFFER,this.frameBuffer),r.readPixels(t.x,this.canvas.height-t.y,1,1,r.RGBA,r.UNSIGNED_BYTE,n),this.rgbToIndex(n[0],n[1],n[2])-1}},t.prototype.fillArrayBuffer=function(t,r,n,e,a,i,o){void 0===e&&(e=3),void 0===i&&(i=!1);var u=o||this.gl,s=u.createBuffer();u.bindBuffer(u.ARRAY_BUFFER,s),u.bufferData(u.ARRAY_BUFFER,n,u.STATIC_DRAW);var c=u.getAttribLocation(t,r);u.enableVertexAttribArray(c),u.bindBuffer(u.ARRAY_BUFFER,s),u.vertexAttribPointer(c,e,a||u.FLOAT,i,0,0)},t.prototype.createProgram=function(t,r,n){if(!r||!n)return null;var e=t.createProgram();return t.attachShader(e,r),t.attachShader(e,n),t.linkProgram(e),t.getProgramParameter(e,t.LINK_STATUS)?e:(console.error(t.getProgramInfoLog(e)),null)},t.prototype.createShader=function(t,r,n){var e=t.createShader(r);return t.shaderSource(e,n),t.compileShader(e),t.getShaderParameter(e,t.COMPILE_STATUS)?e:(console.error(t.getShaderInfoLog(e)),t.deleteShader(e),null)},t.prototype.indexToRGB=function(t){return[t%256/255,Math.floor(t/256)%256/255,Math.floor(t/65536)%256/255]},t.prototype.rgbToIndex=function(t,r,n){return Math.round(t)+256*Math.round(r)+256*Math.round(n)*256},t}(),c=function(){function t(t,r,n){if(this.rateActive=1.5,this.cubePositionBase=[-1,-1,1,1,-1,1,-1,1,1,-1,1,1,1,-1,1,1,1,1,-1,-1,-1,-1,1,-1,1,-1,-1,1,-1,-1,-1,1,-1,1,1,-1,-1,1,-1,-1,1,1,1,1,-1,1,1,-1,-1,1,1,1,1,1,-1,-1,-1,1,-1,-1,-1,-1,1,-1,-1,1,1,-1,-1,1,-1,1,1,-1,-1,1,1,-1,1,-1,1,1,-1,1,1,1,-1,1,1,1,-1,-1,-1,-1,-1,1,-1,1,-1,-1,1,-1,-1,-1,1,-1,1,1],this.planePositionBase=[-1,-1,0,-1,1,0,1,1,0,1,1,0,1,-1,0,-1,-1,0],this.id=u(),this.mat4=t,this.modelMatrix=this.mat4.create(),this.viewMatrix=this.mat4.create(),this.projectMatrix=this.mat4.create(),n&&n.length>0){var e=this.calculateNormals(n);this.position=new Float32Array(n),this.normal=new Float32Array(e)}this.color=r}return t.prototype.createCube=function(t){void 0===t&&(t=1);var r=o([],this.cubePositionBase,!0).map((function(r){return r*t})),n=this.calculateNormals(r);return this.position=new Float32Array(r),this.normal=new Float32Array(n),{position:new Float32Array(r),normal:new Float32Array(n)}},t.prototype.createPlane=function(t){void 0===t&&(t=1);var r=o([],this.planePositionBase,!0).map((function(r){return r*t})),n=this.calculateNormals(r);return this.position=new Float32Array(r),this.normal=new Float32Array(n),{position:new Float32Array(r),normal:new Float32Array(n)}},t.prototype.rotate=function(t,r,n,a,i){void 0===i&&(i=!1);var o=a||this.mat4.create();return this.mat4.rotateX(o,o,i?t:e(t)),this.mat4.rotateY(o,o,i?r:e(r)),this.mat4.rotateZ(o,o,i?n:e(n)),this.modelMatrix=this.mat4.multiply(this.mat4.create(),this.modelMatrix,o),o},t.prototype.setTexture=function(t){this.texture=i({matrix:this.mat4.create()},t)},t.prototype.translate=function(t,r,n,e){var a=e||this.mat4.create();return this.mat4.translate(a,a,[t,r,n]),this.modelMatrix=this.mat4.multiply(this.mat4.create(),this.modelMatrix,a),a},t.prototype.scale=function(t,r,n,e){var a=e||this.mat4.create();return this.mat4.scale(a,a,[t,r,n]),this.modelMatrix=this.mat4.multiply(this.mat4.create(),this.modelMatrix,a),a},t.prototype.model=function(t,r){void 0===r&&(r=!1);var n=t.rotate||[0,0,0],e=t.translate||[0,0,0],a=t.scale||[1,1,1];return this.translate(e[0],e[1],e[2]),this.rotate(n[0],n[1],n[2],this.mat4.create(),r),this.scale(a[0],a[1],a[2]),this.createNormalMatrix(),this.modelMatrix},t.prototype.view=function(t,r,n,e){void 0===n&&(n=[0,1,0]);var a=this.mat4.invert(e||this.mat4.create(),this.mat4.lookAt(this.mat4.create(),t,r,n));return this.viewMatrix=a,a},t.prototype.createNormalMatrix=function(t){var r=t||this.modelMatrix,n=this.mat4.invert(this.mat4.create(),r);return n=this.mat4.transpose(this.mat4.create(),n),this.normalMatrix=n,n},t.prototype.perspective=function(t,r,n,a,i,o,u){void 0===o&&(o=!1);var s=this.mat4.perspective(u||this.mat4.create(),o?t:e(t),r/n,a,i);return this.projectMatrix=s,s},t.prototype.calculateNormals=function(t){for(var r=[],n=function(n){var e=t[n],a=t[n+1],i=t[n+2],u=[t[n+3]-e,t[n+4]-a,t[n+5]-i],s=[t[n+6]-e,t[n+7]-a,t[n+8]-i],c=[u[1]*s[2]-u[2]*s[1],u[2]*s[0]-u[0]*s[2],u[0]*s[1]-u[1]*s[0]],f=Math.sqrt(Math.pow(c[0],2)+Math.pow(c[1],2)+Math.pow(c[2],2)),l=c.map((function(t){return t/f}));r.push.apply(r,o(o(o([],l,!1),l,!1),l,!1))},e=0;e<t.length;e+=9)n(e);return r},t.prototype.generateTexCoords=function(t){return new Float32Array([0,0,0,1,1,0,1,0,0,1,1,1,0,0,1,0,0,1,0,1,1,0,1,1,0,0,0,1,1,0,1,0,0,1,1,1,0,0,1,0,0,1,0,1,1,0,1,1,0,0,1,0,0,1,0,1,1,0,1,1,0,0,0,1,1,0,1,0,0,1,1,1])},t}(),f=n(961),l=f.mat4,h=f.mat3,v=document.getElementById("fieldOfView"),M=document.getElementById("lightX"),d=document.getElementById("lightY"),m=document.getElementById("lightZ"),p=document.getElementById("texture-button"),g=document.getElementById("light-position-button"),b=document.getElementById("light-vector-button"),y=document.getElementById("angle-texture"),E=document.getElementById("shininess");v.addEventListener("input",(function(){return D()})),M.addEventListener("input",(function(){return D()})),d.addEventListener("input",(function(){return D()})),m.addEventListener("input",(function(){return D()})),y.addEventListener("input",(function(){return D()})),p.addEventListener("click",(function(){T=!T,y.value=0,D()})),g.addEventListener("click",(function(){A=!A,D()})),b.addEventListener("click",(function(){P=!P,D()})),E.addEventListener("input",(function(){return D()}));var x=document.getElementById("canvas"),T=!1,A=!1,P=!1,R=!1,_=new Float32Array([1,0,0,1,0,0,1,0,0,1,0,0,1,0,0,1,0,0,0,1,0,0,1,0,0,1,0,0,1,0,0,1,0,0,1,0,0,0,1,0,0,1,0,0,1,0,0,1,0,0,1,0,0,1,1,1,0,1,1,0,1,1,0,1,1,0,1,1,0,1,1,0,1,0,1,1,0,1,1,0,1,1,0,1,1,0,1,1,0,1,0,1,1,0,1,1,0,1,1,0,1,1,0,1,1,0,1,1]),S=0,L=0,I=l.create(),w=(l.create(),1);function D(){var t=new s(x,{useTexture:T,usePointColor:A,useVectorColor:P,usePicking:R});t.shininess=E.value,t.setLightSoucres([{isLightPosition:!0,value:[M.value,d.value,m.value],color:[1,1,1]},{isLightPosition:!1,value:[0,0,1],color:[1,1,1]}]);var r=new c(l,_);r.perspective(Number(v.value),x.width,x.height,.1,10),r.modelMatrix=l.multiply(l.create(),I,l.scale(l.create(),l.create(),[w,w,w])),r.createNormalMatrix(),r.view([0,0,-5],[0,0,0]);var n=r.createCube();r.setTexture({image:U,textcoord:r.generateTexCoords(Array.from(n.position)),matrix:F(y.value,[-.5,-.5])});var e=[r];t.draw(e,!0)}var U=new Image;U.crossOrigin="anonymous",U.onerror=function(){console.error("Failed to load image from ./public/test.jpg")},U.src="./public/test.jpg",U.onload=function(){D()},x.addEventListener("mousedown",(function(t){var r=x.getBoundingClientRect();S=(t.clientX-r.left)/r.width*2-1,L=-(t.clientY-r.top)/r.height*2+1;var n=function(t){var r=l.create(),n=l.create(),e=x.getBoundingClientRect(),a=(t.clientX-e.left)/e.width*2-1,i=-(t.clientY-e.top)/e.height*2+1;l.rotateX(r,l.create(),(i-L)*Math.PI),l.rotateY(n,l.create(),(a-S)*Math.PI);var o=l.create();l.multiply(o,r,n),l.multiply(I,o,I),S=a,L=i,D()},e=function(){S=0,L=0,x.removeEventListener("mousemove",n),x.removeEventListener("mouseup",e)};x.addEventListener("mousemove",n),x.addEventListener("mouseup",e)})),x.addEventListener("wheel",(function(t){t.preventDefault();var r=t.deltaY,n=.001;(w-=r*n)<.01&&(w=.01),w>2.5&&(w=2.5),D()})),x.addEventListener("touchstart",(function(t){if(t.preventDefault(),1===t.touches.length){var r=t.touches[0],n=x.getBoundingClientRect();S=(r.clientX-n.left)/n.width*2-1,L=-(r.clientY-n.top)/n.height*2+1;var e=function(t){var r=t.touches[0],n=l.create(),e=l.create(),a=x.getBoundingClientRect(),i=(r.clientX-a.left)/a.width*2-1,o=-(r.clientY-a.top)/a.height*2+1;l.rotateX(n,l.create(),(o-L)*Math.PI),l.rotateY(e,l.create(),(i-S)*Math.PI);var u=l.create();l.multiply(u,n,e),l.multiply(I,u,I),S=i,L=o,D()},a=function(){S=0,L=0,x.removeEventListener("touchmove",e),x.removeEventListener("touchend",a)};x.addEventListener("touchmove",e),x.addEventListener("touchend",a)}}));var C=0;function F(t,r){var n=r[0],a=r[1],i=e(t),o=h.create();h.translate(o,o,[-n,-a]);var u=h.create();h.rotate(u,u,i);var s=h.create();h.translate(s,s,[n,a]);var c=h.create();return h.multiply(c,o,u),h.multiply(c,c,s),c}return x.addEventListener("touchstart",(function(t){if(2===t.touches.length){var r=t.touches[0].clientX-t.touches[1].clientX,n=t.touches[0].clientY-t.touches[1].clientY;C=Math.sqrt(r*r+n*n)}})),x.addEventListener("touchmove",(function(t){if(t.preventDefault(),2===t.touches.length){var r=t.touches[0].clientX-t.touches[1].clientX,n=t.touches[0].clientY-t.touches[1].clientY,e=Math.sqrt(r*r+n*n),a=.001,i=e-C;C=e,(w+=i*a)<.01&&(w=.01),w>2.5&&(w=2.5),D()}})),{}})()));
//# sourceMappingURL=khoadev.min.js.map